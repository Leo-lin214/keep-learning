<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>React Summary(å…¨æ€»ç»“) | Learing And Sharing</title>
    <meta name="description" content="å¥½å¥½å­¦ä¹ ï¼Œå¤©å¤©å‘ä¸ŠğŸ’ª">
    <meta name="generator" content="VuePress 1.3.0">
    
    
    <link rel="preload" href="/keep-Learning/assets/css/0.styles.69d11f16.css" as="style"><link rel="preload" href="/keep-Learning/assets/js/app.90ccec97.js" as="script"><link rel="preload" href="/keep-Learning/assets/js/2.71580b53.js" as="script"><link rel="preload" href="/keep-Learning/assets/js/81.6eacd104.js" as="script"><link rel="prefetch" href="/keep-Learning/assets/js/10.99f30dcf.js"><link rel="prefetch" href="/keep-Learning/assets/js/100.53100d9a.js"><link rel="prefetch" href="/keep-Learning/assets/js/101.02f72051.js"><link rel="prefetch" href="/keep-Learning/assets/js/102.60bb996e.js"><link rel="prefetch" href="/keep-Learning/assets/js/103.c7f3df5b.js"><link rel="prefetch" href="/keep-Learning/assets/js/104.e8378220.js"><link rel="prefetch" href="/keep-Learning/assets/js/105.90235e89.js"><link rel="prefetch" href="/keep-Learning/assets/js/106.f4905ea3.js"><link rel="prefetch" href="/keep-Learning/assets/js/107.02dfbd1b.js"><link rel="prefetch" href="/keep-Learning/assets/js/108.e4ffed8c.js"><link rel="prefetch" href="/keep-Learning/assets/js/109.2f6191db.js"><link rel="prefetch" href="/keep-Learning/assets/js/11.ccfc084d.js"><link rel="prefetch" href="/keep-Learning/assets/js/110.05776fb6.js"><link rel="prefetch" href="/keep-Learning/assets/js/111.b05f070d.js"><link rel="prefetch" href="/keep-Learning/assets/js/112.e07a4e74.js"><link rel="prefetch" href="/keep-Learning/assets/js/113.71af1d2b.js"><link rel="prefetch" href="/keep-Learning/assets/js/114.914195f4.js"><link rel="prefetch" href="/keep-Learning/assets/js/115.3a0e92aa.js"><link rel="prefetch" href="/keep-Learning/assets/js/116.4ab80baa.js"><link rel="prefetch" href="/keep-Learning/assets/js/12.5bee8056.js"><link rel="prefetch" href="/keep-Learning/assets/js/13.05de0df0.js"><link rel="prefetch" href="/keep-Learning/assets/js/14.d86b4a20.js"><link rel="prefetch" href="/keep-Learning/assets/js/15.887efa99.js"><link rel="prefetch" href="/keep-Learning/assets/js/16.f7c7fa8d.js"><link rel="prefetch" href="/keep-Learning/assets/js/17.dbf7a65f.js"><link rel="prefetch" href="/keep-Learning/assets/js/18.e57690bf.js"><link rel="prefetch" href="/keep-Learning/assets/js/19.7486ada7.js"><link rel="prefetch" href="/keep-Learning/assets/js/20.d9250e4c.js"><link rel="prefetch" href="/keep-Learning/assets/js/21.71046546.js"><link rel="prefetch" href="/keep-Learning/assets/js/22.5d1bafeb.js"><link rel="prefetch" href="/keep-Learning/assets/js/23.06f0e746.js"><link rel="prefetch" href="/keep-Learning/assets/js/24.2d27300f.js"><link rel="prefetch" href="/keep-Learning/assets/js/25.08ee3872.js"><link rel="prefetch" href="/keep-Learning/assets/js/26.b747bff1.js"><link rel="prefetch" href="/keep-Learning/assets/js/27.895e5c28.js"><link rel="prefetch" href="/keep-Learning/assets/js/28.8674bd28.js"><link rel="prefetch" href="/keep-Learning/assets/js/29.00b3c0e2.js"><link rel="prefetch" href="/keep-Learning/assets/js/3.227fd7b0.js"><link rel="prefetch" href="/keep-Learning/assets/js/30.7c8a2e90.js"><link rel="prefetch" href="/keep-Learning/assets/js/31.4e94fa86.js"><link rel="prefetch" href="/keep-Learning/assets/js/32.24db43de.js"><link rel="prefetch" href="/keep-Learning/assets/js/33.3a9d7c5b.js"><link rel="prefetch" href="/keep-Learning/assets/js/34.455ff1fa.js"><link rel="prefetch" href="/keep-Learning/assets/js/35.bf04ef16.js"><link rel="prefetch" href="/keep-Learning/assets/js/36.f733bfb6.js"><link rel="prefetch" href="/keep-Learning/assets/js/37.507ec8ee.js"><link rel="prefetch" href="/keep-Learning/assets/js/38.4c8024fc.js"><link rel="prefetch" href="/keep-Learning/assets/js/39.e5094649.js"><link rel="prefetch" href="/keep-Learning/assets/js/4.c62e84b3.js"><link rel="prefetch" href="/keep-Learning/assets/js/40.6dd7a473.js"><link rel="prefetch" href="/keep-Learning/assets/js/41.14db9a5d.js"><link rel="prefetch" href="/keep-Learning/assets/js/42.342c49d2.js"><link rel="prefetch" href="/keep-Learning/assets/js/43.e2f02df0.js"><link rel="prefetch" href="/keep-Learning/assets/js/44.85c43572.js"><link rel="prefetch" href="/keep-Learning/assets/js/45.2d71b584.js"><link rel="prefetch" href="/keep-Learning/assets/js/46.26841be2.js"><link rel="prefetch" href="/keep-Learning/assets/js/47.2be49ff6.js"><link rel="prefetch" href="/keep-Learning/assets/js/48.b0982983.js"><link rel="prefetch" href="/keep-Learning/assets/js/49.0160ec63.js"><link rel="prefetch" href="/keep-Learning/assets/js/5.c9cb8de9.js"><link rel="prefetch" href="/keep-Learning/assets/js/50.d1a3af12.js"><link rel="prefetch" href="/keep-Learning/assets/js/51.a655886f.js"><link rel="prefetch" href="/keep-Learning/assets/js/52.93851e74.js"><link rel="prefetch" href="/keep-Learning/assets/js/53.c8009c28.js"><link rel="prefetch" href="/keep-Learning/assets/js/54.7945804f.js"><link rel="prefetch" href="/keep-Learning/assets/js/55.0d1b82a0.js"><link rel="prefetch" href="/keep-Learning/assets/js/56.ea4f3968.js"><link rel="prefetch" href="/keep-Learning/assets/js/57.c7fe55e7.js"><link rel="prefetch" href="/keep-Learning/assets/js/58.e2e1b6dd.js"><link rel="prefetch" href="/keep-Learning/assets/js/59.195b09a3.js"><link rel="prefetch" href="/keep-Learning/assets/js/6.7294f365.js"><link rel="prefetch" href="/keep-Learning/assets/js/60.b0c6ca2b.js"><link rel="prefetch" href="/keep-Learning/assets/js/61.d8137606.js"><link rel="prefetch" href="/keep-Learning/assets/js/62.354a6c3b.js"><link rel="prefetch" href="/keep-Learning/assets/js/63.42a16259.js"><link rel="prefetch" href="/keep-Learning/assets/js/64.44130cd9.js"><link rel="prefetch" href="/keep-Learning/assets/js/65.826334d1.js"><link rel="prefetch" href="/keep-Learning/assets/js/66.39bd2327.js"><link rel="prefetch" href="/keep-Learning/assets/js/67.89147bbe.js"><link rel="prefetch" href="/keep-Learning/assets/js/68.a7602bd4.js"><link rel="prefetch" href="/keep-Learning/assets/js/69.028f1340.js"><link rel="prefetch" href="/keep-Learning/assets/js/7.a9fa44ec.js"><link rel="prefetch" href="/keep-Learning/assets/js/70.3bb91667.js"><link rel="prefetch" href="/keep-Learning/assets/js/71.65fb15dd.js"><link rel="prefetch" href="/keep-Learning/assets/js/72.00066c85.js"><link rel="prefetch" href="/keep-Learning/assets/js/73.47b522ff.js"><link rel="prefetch" href="/keep-Learning/assets/js/74.7a6ef089.js"><link rel="prefetch" href="/keep-Learning/assets/js/75.b187d3a1.js"><link rel="prefetch" href="/keep-Learning/assets/js/76.88a347ac.js"><link rel="prefetch" href="/keep-Learning/assets/js/77.6f86a34a.js"><link rel="prefetch" href="/keep-Learning/assets/js/78.d0ed26d6.js"><link rel="prefetch" href="/keep-Learning/assets/js/79.83c1ce53.js"><link rel="prefetch" href="/keep-Learning/assets/js/8.acbc06dd.js"><link rel="prefetch" href="/keep-Learning/assets/js/80.a48aa37a.js"><link rel="prefetch" href="/keep-Learning/assets/js/82.25ef373b.js"><link rel="prefetch" href="/keep-Learning/assets/js/83.09550954.js"><link rel="prefetch" href="/keep-Learning/assets/js/84.e8671abc.js"><link rel="prefetch" href="/keep-Learning/assets/js/85.b1b7d209.js"><link rel="prefetch" href="/keep-Learning/assets/js/86.d297bac9.js"><link rel="prefetch" href="/keep-Learning/assets/js/87.eeea66b3.js"><link rel="prefetch" href="/keep-Learning/assets/js/88.0ea72a36.js"><link rel="prefetch" href="/keep-Learning/assets/js/89.4155e98e.js"><link rel="prefetch" href="/keep-Learning/assets/js/9.ad2f8d07.js"><link rel="prefetch" href="/keep-Learning/assets/js/90.611a7011.js"><link rel="prefetch" href="/keep-Learning/assets/js/91.e84d85cf.js"><link rel="prefetch" href="/keep-Learning/assets/js/92.30b75a79.js"><link rel="prefetch" href="/keep-Learning/assets/js/93.0ccb8db1.js"><link rel="prefetch" href="/keep-Learning/assets/js/94.f5e0fbaf.js"><link rel="prefetch" href="/keep-Learning/assets/js/95.7e23aad8.js"><link rel="prefetch" href="/keep-Learning/assets/js/96.654c8e0c.js"><link rel="prefetch" href="/keep-Learning/assets/js/97.b65e23fb.js"><link rel="prefetch" href="/keep-Learning/assets/js/98.e14a8d6c.js"><link rel="prefetch" href="/keep-Learning/assets/js/99.e2ce5525.js">
    <link rel="stylesheet" href="/keep-Learning/assets/css/0.styles.69d11f16.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/keep-Learning/" class="home-link router-link-active"><!----> <span class="site-name">Learing And Sharing</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/keep-Learning/" class="nav-link">
  ä¸»é¡µ
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æŠ€æœ¯åˆ†äº«" class="dropdown-title"><span class="title">æŠ€æœ¯åˆ†äº«</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/keep-Learning/javascript/javascript-learning-and-summary/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/keep-Learning/html/html-learning-and-summary/" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/keep-Learning/css/css-learning-and-summary/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/keep-Learning/vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/keep-Learning/react/" class="nav-link router-link-active">
  React
</a></li><li class="dropdown-item"><!----> <a href="/keep-Learning/webpack/webpack-learning-and-summary/" class="nav-link">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/keep-Learning/ts/ts-learning-and-summary/" class="nav-link">
  Typescript
</a></li><li class="dropdown-item"><!----> <a href="/keep-Learning/nodejs/nodejs-learning-and-summary/" class="nav-link">
  Nodejs
</a></li><li class="dropdown-item"><!----> <a href="/keep-Learning/weex/weex-learning-and-summary/" class="nav-link">
  Weex
</a></li><li class="dropdown-item"><!----> <a href="/keep-Learning/network/network-learning-and-summary/" class="nav-link">
  Network
</a></li><li class="dropdown-item"><!----> <a href="/keep-Learning/datastructure/datastructure-learning-and-summary/" class="nav-link">
  æ•°æ®ç»“æ„
</a></li><li class="dropdown-item"><!----> <a href="/keep-Learning/mixin/mixin-learning-and-summary/" class="nav-link">
  æ—¥å¸¸æ‚è®°
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/Andraw-lin" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/keep-Learning/" class="nav-link">
  ä¸»é¡µ
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="æŠ€æœ¯åˆ†äº«" class="dropdown-title"><span class="title">æŠ€æœ¯åˆ†äº«</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/keep-Learning/javascript/javascript-learning-and-summary/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/keep-Learning/html/html-learning-and-summary/" class="nav-link">
  HTML
</a></li><li class="dropdown-item"><!----> <a href="/keep-Learning/css/css-learning-and-summary/" class="nav-link">
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/keep-Learning/vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-item"><!----> <a href="/keep-Learning/react/" class="nav-link router-link-active">
  React
</a></li><li class="dropdown-item"><!----> <a href="/keep-Learning/webpack/webpack-learning-and-summary/" class="nav-link">
  Webpack
</a></li><li class="dropdown-item"><!----> <a href="/keep-Learning/ts/ts-learning-and-summary/" class="nav-link">
  Typescript
</a></li><li class="dropdown-item"><!----> <a href="/keep-Learning/nodejs/nodejs-learning-and-summary/" class="nav-link">
  Nodejs
</a></li><li class="dropdown-item"><!----> <a href="/keep-Learning/weex/weex-learning-and-summary/" class="nav-link">
  Weex
</a></li><li class="dropdown-item"><!----> <a href="/keep-Learning/network/network-learning-and-summary/" class="nav-link">
  Network
</a></li><li class="dropdown-item"><!----> <a href="/keep-Learning/datastructure/datastructure-learning-and-summary/" class="nav-link">
  æ•°æ®ç»“æ„
</a></li><li class="dropdown-item"><!----> <a href="/keep-Learning/mixin/mixin-learning-and-summary/" class="nav-link">
  æ—¥å¸¸æ‚è®°
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/Andraw-lin" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/keep-Learning/react/react-learning-and-summary" class="sidebar-heading clickable router-link-active open"><span>React å­¦ä¹ å’Œæ€»ç»“</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/keep-Learning/react/react-learning-and-summary/About-React-Render-And-Update.html" class="sidebar-link">ä¸ªäººè§è§£ä¹‹ React æ¸²æŸ“ä¸æ›´æ–°</a></li><li><a href="/keep-Learning/react/react-learning-and-summary/React-Summary.html" class="active sidebar-link">React çŸ¥è¯†ç‚¹æ€»ç»“</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/keep-Learning/react/react-learning-and-summary/React-Summary.html#ç›®å½•" class="sidebar-link">ç›®å½•</a></li><li class="sidebar-sub-header"><a href="/keep-Learning/react/react-learning-and-summary/React-Summary.html#ç»„ä»¶" class="sidebar-link">ç»„ä»¶</a></li><li class="sidebar-sub-header"><a href="/keep-Learning/react/react-learning-and-summary/React-Summary.html#jsx" class="sidebar-link">JSX</a></li><li class="sidebar-sub-header"><a href="/keep-Learning/react/react-learning-and-summary/React-Summary.html#ç”Ÿå‘½å‘¨æœŸ" class="sidebar-link">ç”Ÿå‘½å‘¨æœŸ</a></li><li class="sidebar-sub-header"><a href="/keep-Learning/react/react-learning-and-summary/React-Summary.html#ç»„ä»¶çš„å±æ€§å’ŒçŠ¶æ€" class="sidebar-link">ç»„ä»¶çš„å±æ€§å’ŒçŠ¶æ€</a></li><li class="sidebar-sub-header"><a href="/keep-Learning/react/react-learning-and-summary/React-Summary.html#äº‹ä»¶å¤„ç†" class="sidebar-link">äº‹ä»¶å¤„ç†</a></li><li class="sidebar-sub-header"><a href="/keep-Learning/react/react-learning-and-summary/React-Summary.html#ç»„ä»¶é€šä¿¡" class="sidebar-link">ç»„ä»¶é€šä¿¡</a></li><li class="sidebar-sub-header"><a href="/keep-Learning/react/react-learning-and-summary/React-Summary.html#è¡¨å•å¤„ç†" class="sidebar-link">è¡¨å•å¤„ç†</a></li><li class="sidebar-sub-header"><a href="/keep-Learning/react/react-learning-and-summary/React-Summary.html#æ ·å¼å¤„ç†" class="sidebar-link">æ ·å¼å¤„ç†</a></li><li class="sidebar-sub-header"><a href="/keep-Learning/react/react-learning-and-summary/React-Summary.html#ç»„ä»¶çš„æŠ½è±¡ä¸å¤ç”¨" class="sidebar-link">ç»„ä»¶çš„æŠ½è±¡ä¸å¤ç”¨</a></li><li class="sidebar-sub-header"><a href="/keep-Learning/react/react-learning-and-summary/React-Summary.html#dom-ç›¸å…³" class="sidebar-link">DOM ç›¸å…³</a></li><li class="sidebar-sub-header"><a href="/keep-Learning/react/react-learning-and-summary/React-Summary.html#hook" class="sidebar-link">Hook</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="react-summary-å…¨æ€»ç»“"><a href="#react-summary-å…¨æ€»ç»“" class="header-anchor">#</a> React Summary(å…¨æ€»ç»“)</h1> <p>æœ¬æ–‡çš„ç›®çš„åœ¨äºå¯¹<code>React</code>å¿«é€Ÿå¤ä¹ çš„çŸ¥è¯†ç‚¹æ€»ç»“ï¼Œä¾¿äºåæœŸå¿«é€Ÿé˜…è§ˆã€‚ğŸ¤”å½“ç„¶ï¼Œä½ å¯ä»¥æŠŠå®ƒå½“æˆæ˜¯ä¸€ä¸ª<code>React</code>çŸ¥è¯†ç‚¹å¤§çº²ï¼Œå¯¹äºé¢è¯•å‰çš„å‡†å¤‡ä¹Ÿæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å¤ä¹ å“ˆ ğŸ’ªã€‚</p> <p>åæœŸè‹¥æœ‰æ–°çš„çŸ¥è¯†ç‚¹å†…å®¹ï¼Œä¼šç»§ç»­æ›´æ–° ğŸ˜„ã€‚</p> <h2 id="ç›®å½•"><a href="#ç›®å½•" class="header-anchor">#</a> ç›®å½•</h2> <ul><li><a href="#%E7%BB%84%E4%BB%B6"><span>ç»„ä»¶</span></a></li> <li><a href="#JSX"><span>JSX</span></a></li> <li><a href="#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span>ç”Ÿå‘½å‘¨æœŸ</span></a></li> <li><a href="#%E7%BB%84%E4%BB%B6%E7%9A%84%E5%B1%9E%E6%80%A7%E5%92%8C%E7%8A%B6%E6%80%81"><span>ç»„ä»¶çš„å±æ€§å’ŒçŠ¶æ€</span></a></li> <li><a href="#%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86"><span>äº‹ä»¶å¤„ç†</span></a></li> <li><a href="#%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1"><span>ç»„ä»¶é€šä¿¡</span></a></li> <li><a href="#%E8%A1%A8%E5%8D%95%E5%A4%84%E7%90%86"><span>è¡¨å•å¤„ç†</span></a></li> <li><a href="#%E6%A0%B7%E5%BC%8F%E5%A4%84%E7%90%86"><span>æ ·å¼å¤„ç†</span></a></li> <li><a href="#%E7%BB%84%E4%BB%B6%E7%9A%84%E6%8A%BD%E8%B1%A1%E4%B8%8E%E5%A4%8D%E7%94%A8"><span>ç»„ä»¶çš„æŠ½è±¡ä¸å¤ç”¨</span></a></li> <li><a href="#dom-%E7%9B%B8%E5%85%B3"><span>DOM ç›¸å…³</span></a></li> <li><a href="#hook"><span>Hook</span></a></li></ul> <h2 id="ç»„ä»¶"><a href="#ç»„ä»¶" class="header-anchor">#</a> ç»„ä»¶</h2> <ol><li><p>åˆ›å»ºç»„ä»¶çš„æ–¹å¼å¯åˆ†ä¸ºä¸¤ç§ï¼Œåˆ†åˆ«ä¸º ES5 å’Œ ES6 ä¸¤ç§æ–¹å¼ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// ES5</span>
<span class="token keyword">var</span> React <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'react'</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> Hello <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  propTypes<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token comment">// ç±»å‹æ£€æŸ¥</span>
    name<span class="token punctuation">:</span> React<span class="token punctuation">.</span>PropTypes<span class="token punctuation">.</span>string
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">getDefaultProps</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// è·å–é»˜è®¤å±æ€§</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      name<span class="token punctuation">:</span> <span class="token string">'Andraw-lin'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">getInitialState</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// åˆå§‹åŒ–çŠ¶æ€state</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      count<span class="token punctuation">:</span> <span class="token number">1</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">render</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>hello<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>name <span class="token punctuation">}</span> <span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count <span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// ES6</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> PropTypes <span class="token keyword">from</span> <span class="token string">'prop-types'</span>
<span class="token keyword">class</span> <span class="token class-name">Hello</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> propTypes <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token comment">// ç±»å‹æ£€æŸ¥</span>
    name<span class="token punctuation">:</span> PropTypes<span class="token punctuation">.</span>string
  <span class="token punctuation">}</span>
  <span class="token keyword">static</span> defaultProps <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token comment">// è·å–é»˜è®¤å±æ€§</span>
    name<span class="token punctuation">:</span> <span class="token string">'Andraw-lin'</span>
  <span class="token punctuation">}</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token comment">// åˆå§‹åŒ–çŠ¶æ€state</span>
      count<span class="token punctuation">:</span> <span class="token number">1</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>Hello<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>name <span class="token punctuation">}</span> <span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>count <span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>æ— çŠ¶æ€ç»„ä»¶ï¼Œä¹Ÿå«å‡½æ•°å¼ç»„ä»¶ã€‚æ— çŠ¶æ€ç»„ä»¶åªä¼ å…¥ props å’Œ context ä¸¤ä¸ªå‚æ•°ï¼Œç®€å•æ»´è¯´ï¼Œ<strong>æ— çŠ¶æ€ç»„ä»¶ä¸å­˜åœ¨ stateï¼Œä¹Ÿæ²¡æœ‰ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œåªæœ‰ä¸€ä¸ª render æ–¹æ³•</strong>ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Button</span><span class="token punctuation">(</span><span class="token punctuation">{</span> color <span class="token operator">=</span> <span class="token string">'blue'</span><span class="token punctuation">,</span> text <span class="token operator">=</span> <span class="token string">'OK'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>button className<span class="token operator">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">btn-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>color<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>em<span class="token operator">&gt;</span><span class="token punctuation">{</span>text<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>em<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p><code>PureComponent</code>æ˜¯ react 15.3 åå¼•å…¥çš„ï¼Œå’Œæ™®é€šçš„<code>Component</code>åŠŸèƒ½å‡ ä¹ä¸€è‡´ï¼Œä½†**<code>PureComponent</code>çš„<code>shouldComponentUpdate</code>ä¸ä¼šç›´æ¥è¿”å›<code>true</code>**ï¼Œè€Œæ˜¯ä¼šå¯¹å±æ€§è¿›è¡Œæµ…å±‚æ¯”è¾ƒï¼Œä¹Ÿå°±æ˜¯ä»…æ¯”è¾ƒç›´æ¥å±æ€§æ˜¯å¦ç›¸ç­‰ã€‚</p> <p>ä¸‹é¢æ¨¡æ‹Ÿ<code>PureComponent</code>ç»„ä»¶çš„å®ç°ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Demo</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">shouldComponentUpdate</span><span class="token punctuation">(</span><span class="token parameter">nextProps<span class="token punctuation">,</span> nextState</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span>props<span class="token punctuation">,</span> state<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span>
    <span class="token keyword">function</span> <span class="token function">shallowCompare</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">===</span> b<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">!==</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span>
      <span class="token keyword">return</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">every</span><span class="token punctuation">(</span><span class="token parameter">k</span> <span class="token operator">=&gt;</span> a<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">===</span> b<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token operator">!</span><span class="token function">shallowCompare</span><span class="token punctuation">(</span>nextProp<span class="token punctuation">,</span> props<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token function">shallowCompare</span><span class="token punctuation">(</span>nextState<span class="token punctuation">,</span> state<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ol> <p><strong>æ€»ç»“ï¼šä¸€èˆ¬æƒ…å†µä¸‹ï¼Œéƒ½æ˜¯ä½¿ç”¨æ™®é€š<code>Component</code>ï¼Œè‹¥ç»„ä»¶åªæ˜¯ä½œä¸ºæ¸²æŸ“ä½¿ç”¨ï¼Œé‚£ä¹ˆä½¿ç”¨æ— çŠ¶æ€ç»„ä»¶<code>Functional Component</code>ï¼Œè‹¥ç»„ä»¶æ˜¯åŸºæœ¬ä¸å˜åŒ–ç»„ä»¶ï¼Œé‚£ä¹ˆä½¿ç”¨çº¯ç»„ä»¶<code>PureComponent</code></strong>ã€‚</p> <h2 id="jsx"><a href="#jsx" class="header-anchor">#</a> JSX</h2> <ol><li><p>åœ¨ React ä¸­åˆ›å»ºçš„è™šæ‹Ÿå…ƒç´ å¯ä»¥åˆ†ä¸ºä¸¤ç±»ï¼š<strong>DOM å…ƒç´ ï¼ˆDOM elmentï¼‰ã€ç»„ä»¶å…ƒç´ </strong>ï¼ˆcomponent elementï¼‰ï¼Œåˆ†åˆ«å¯¹åº”ç€åŸå£° DOM å…ƒç´ ä¸è‡ªå®šä¹‰å…ƒç´ ã€‚</p> <p>å…¶ä¸­ï¼Œ<strong>DOM å…ƒç´ æ ‡ç­¾çš„é¦–å­—æ¯æ˜¯å°å†™ï¼Œè€Œç»„ä»¶å…ƒç´ åˆ™æ˜¯å¤§å†™</strong>ã€‚</p></li> <li><p>é’ˆå¯¹æ¨¡æ¿ä¸­éœ€è¦æ ¹æ®æµè§ˆå™¨ IE æ¥è¾“å‡ºæ ‡ç­¾æ—¶ï¼Œéœ€è¿›è¡Œå¦‚ä½•è½¬åŒ–ï¼š</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// æ—¥å¸¸ä½¿ç”¨</span>
<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span><span class="token punctuation">[</span><span class="token keyword">if</span> <span class="token constant">IE</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>work <span class="token keyword">in</span> <span class="token constant">IE</span> brower<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token punctuation">[</span>endif<span class="token punctuation">]</span><span class="token operator">--</span><span class="token operator">&gt;</span>

<span class="token comment">// JSX ä¸­ä½¿ç”¨éœ€è¿›è¡Œè½¬åŒ–</span>
<span class="token punctuation">{</span>
  <span class="token punctuation">(</span><span class="token operator">!</span><span class="token operator">!</span>window<span class="token punctuation">.</span>ActiveXObject <span class="token operator">||</span> <span class="token string">'ActiveXObject'</span> <span class="token keyword">in</span> window<span class="token punctuation">)</span> <span class="token operator">?</span>
   <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>work <span class="token keyword">in</span> <span class="token constant">IE</span> brower<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span> <span class="token punctuation">:</span> <span class="token string">''</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>åœ¨ JSX ä¸­ä½¿ç”¨å…ƒç´ å±æ€§æ—¶ï¼Œæœ‰ä¸¤ä¸ªå±æ€§éœ€è¦æ³¨æ„çš„æ˜¯ï¼š</p> <ul><li>class å±æ€§æ”¹ä¸º classNameï¼›</li> <li>for å±æ€§æ”¹ä¸º htmlForï¼›</li></ul></li> <li><p>åœ¨ JSX ä¸­è¡¨å•æ ‡ç­¾<strong>ä½¿ç”¨ disabledã€requiredã€checkedã€readOnly ç­‰æ—¶ï¼Œè‹¥ä¸è®¾ç½®å€¼æ—¶ï¼Œéƒ½ä¼šé»˜è®¤ä¸º true</strong>ã€‚ç›´æ¥ä¸Šæ —å­ğŸŒ°ï¼š</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Checkbox</span> <span class="token attr-name">checked</span> <span class="token punctuation">/&gt;</span></span>
// ç›¸å½“äº
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Checkbox</span> <span class="token attr-name">checked</span><span class="token attr-value"><span class="token punctuation">=</span>{true}</span> <span class="token punctuation">/&gt;</span></span>

// ä¸€æ—¦è®¾ç½®falseæ—¶ï¼Œå°±éœ€è¦è‡ªè¡Œè®¾ç½®è€Œæ— æ³•ç®€åŒ–
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Checkbox</span> <span class="token attr-name">checked</span><span class="token attr-value"><span class="token punctuation">=</span>{false}</span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div></li> <li><p><strong>React æä¾› dangerouslySetInnerHTML å±æ€§ï¼Œå¯ç”¨äºè½¬è¯‘ HTML æ ‡ç­¾çš„å†…å®¹ï¼ŒåŒæ—¶å¯é¿å… React è½¬ä¹‰å­—ç¬¦</strong>ã€‚ç›´æ¥ä¸Šæ —å­ğŸŒ°ï¼š</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">dangouslySetInnerHTML</span><span class="token attr-value"><span class="token punctuation">=</span>{{__html:</span> <span class="token attr-name">'cc</span> <span class="token attr-name">&amp;copy;</span> <span class="token attr-name">2015'}}</span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div></li></ol> <h2 id="ç”Ÿå‘½å‘¨æœŸ"><a href="#ç”Ÿå‘½å‘¨æœŸ" class="header-anchor">#</a> ç”Ÿå‘½å‘¨æœŸ</h2> <p>ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸä¸»è¦åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼Œåˆ†åˆ«ä¸ºï¼š<strong>æŒ‚è½½é˜¶æ®µã€æ›´æ–°é˜¶æ®µå’Œå¸è½½é˜¶æ®µ</strong>ã€‚</p> <ol><li><p>æŒ‚è½½é˜¶æ®µä¼šæ‰§è¡Œä»¥ä¸‹å›è°ƒå‡½æ•°ã€‚</p> <ul><li>constructor()</li> <li>componentWillMount()</li> <li>render()</li> <li>componentDidMount()</li></ul></li> <li><p>æ›´æ–°é˜¶æ®µä¼šåˆ†ä¸ºä¸‰ç§æƒ…å†µï¼Œåˆ†åˆ«æ˜¯<strong>çˆ¶ç»„ä»¶æ›´æ–°ã€è‡ªèº«çŠ¶æ€æ›´æ–°ã€<code>forceUpdate</code>å¼ºåˆ¶æ›´æ–°</strong>ã€‚</p> <ul><li>çˆ¶ç»„ä»¶æ›´æ–°æ—¶ï¼Œä¼šæ‰§è¡Œä»¥ä¸‹å›è°ƒå‡½æ•°ã€‚
<ul><li>componentWillReceiveProps()</li> <li>shouldComponentUpdate()</li> <li>render()</li> <li>componentDidUpdate()</li></ul></li> <li>è‡ªèº«çŠ¶æ€æ›´æ–°æ—¶ï¼Œä¼šæ‰§è¡Œä»¥ä¸‹å›è°ƒå‡½æ•°ã€‚
<ul><li>shouldComponentUpdate()</li> <li>componentWillUpdate()</li> <li>render()</li> <li>componentDidUpdate()</li></ul></li> <li><code>forceUpdate</code>å¼ºåˆ¶æ›´æ–°æ—¶ï¼Œä¼šæ‰§è¡Œä»¥ä¸‹å›è°ƒå‡½æ•°ã€‚
<ul><li>componentWillUpdate()</li> <li>render()</li> <li>componentDidUpdate()</li></ul></li></ul> <p>æ³¨æ„ï¼š<strong><code>shouldComponentUpdate</code>ä¸»è¦ç”¨äºæå‡æ€§èƒ½ï¼Œ<code>componentWillReceiveProps</code>ä¸»è¦ç”¨æ¥å°†æ–°çš„<code>props</code>åŒæ­¥åˆ°<code>state</code>ä¸­</strong>ã€‚</p></li> <li><p>å¸è½½é˜¶æ®µåªä¼šæ‰§è¡Œ<code>componentWillUnmount</code>å›è°ƒå‡½æ•°ï¼Œä¸»è¦ç”¨äº<strong>æ¸…é™¤å®šæ—¶å™¨ã€è§£ç»‘è‡ªå®šä¹‰äº‹ä»¶</strong>ï¼Œé¿å…å†…å­˜æ³„æ¼ã€‚</p></li></ol> <h2 id="ç»„ä»¶çš„å±æ€§å’ŒçŠ¶æ€"><a href="#ç»„ä»¶çš„å±æ€§å’ŒçŠ¶æ€" class="header-anchor">#</a> ç»„ä»¶çš„å±æ€§å’ŒçŠ¶æ€</h2> <ol><li><p><code>props</code>éƒ½æ˜¯åªè¯»çš„ï¼Œä¸èƒ½è¿›è¡Œæ›´æ”¹ã€‚</p> <p>å…¶ä¸­æœ‰ä¸€ä¸ªæ¯”è¾ƒç‰¹æ®Šçš„å±æ€§â€”â€”<code>children</code>ï¼Œä»£è¡¨å½“å‰ç»„ä»¶çš„å­ç»„ä»¶é›†åˆï¼Œè‡ªå®šä¹‰å±æ€§åä¸èƒ½ä¸è¯¥åå­—é‡å¤ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">List</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>ol<span class="token operator">&gt;</span><span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>children <span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>ol<span class="token operator">&gt;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token operator">&lt;</span>list<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span><span class="token number">2</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>list<span class="token operator">&gt;</span>
</code></pre></div></li> <li><p>é€šè¿‡<strong>é…ç½®é™æ€å±æ€§<code>defaultProps</code>èƒ½ç»™äºˆç»„ä»¶é»˜è®¤å±æ€§å€¼</strong>ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> defaultProps <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">'Andraw-lin'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>ç±»å‹æ£€æµ‹<code>PropTypes</code>åœ¨ç‰ˆæœ¬<code>15.5</code>å‰éƒ½æ˜¯åœ¨<code>React</code>åŒ…ä¸­ï¼Œåé¢çš„ç‰ˆæœ¬éƒ½æ˜¯åˆ†ç¦»åˆ°å•ç‹¬çš„<code>prop-types</code>åŒ…ä¸­ï¼Œéœ€å•ç‹¬å¼•å…¥ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> PropTypes <span class="token keyword">from</span> <span class="token string">'prop-types'</span>

<span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token keyword">static</span> propTypes <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> PropTypes<span class="token punctuation">.</span>string<span class="token punctuation">.</span>isRequired
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>åˆå§‹åŒ–<code>state</code>æ–¹å¼æœ‰ä¸¤ç§ã€‚åˆ†åˆ«ä¸ºæ„é€ å‡½æ•°ä¸­å®šä¹‰å’Œæ™®é€šå±æ€§å®šä¹‰ã€‚ï¼ˆå…¶ä¸­æ™®é€šå±æ€§å®šä¹‰è¿˜ä¸æ˜¯è¯­è¨€æ ‡å‡†ï¼Œå±äºææ¡ˆï¼Œä¸è¿‡<code>babel</code>å·²ç»æ”¯æŒï¼‰</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// æ„é€ å‡½æ•°ä¸­å®šä¹‰</span>
<span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      name<span class="token punctuation">:</span> <span class="token string">'Andraw-lin'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// æ™®é€šå±æ€§å®šä¹‰ï¼ˆè¿˜ä¸æ˜¯è¯­è¨€æ ‡å‡†ï¼Œå±äºææ¡ˆï¼Œä¸è¿‡babelå·²ç»æ”¯æŒï¼‰</span>
<span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">'Andraw-lin'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p><strong><code>setState</code>æ–¹æ³•æ˜¯ä¸€ä¸ªå¼‚æ­¥æ–¹æ³•ï¼Œ<code>React</code>ä¼šåœ¨ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸå†…å°†å¤šæ¬¡<code>setState</code>æ“ä½œåˆå¹¶æˆä¸€æ¬¡</strong>ã€‚ï¼ˆè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆåœ¨<code>setState</code>åç«‹é©¬å–å€¼ï¼Œæ˜¯æ— æ³•å–åˆ°æ›´æ–°çš„å€¼åŸå› ï¼‰</p> <p>è‹¥æƒ³ç«‹é©¬è·å–<code>setState</code>æ›´æ–°åçš„å€¼ï¼Œæœ‰ä¸¤ç§æ–¹å¼ï¼Œåˆ†åˆ«æ˜¯<strong>å°†è®¡ç®—ç»“æœå­˜å‚¨ä¸‹æ¥</strong>å’Œ<strong>ä½¿ç”¨<code>setState</code>æ–¹æ³•ç¬¬äºŒä¸ªå‚æ•°å›è°ƒå‡½æ•°</strong>ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// å°†è®¡ç®—ç»“æœå­˜å‚¨ä¸‹æ¥ï¼ˆæœ€ç®€å•æ–¹å¼ï¼‰</span>
state <span class="token operator">=</span> <span class="token punctuation">{</span> time<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
<span class="token function">componentWillMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> newTime <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>time <span class="token operator">+</span> <span class="token number">1</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> time<span class="token punctuation">:</span> newTime <span class="token punctuation">}</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newTime<span class="token punctuation">)</span> <span class="token comment">// 2</span>
<span class="token punctuation">}</span>

<span class="token comment">// ä½¿ç”¨setStateæ–¹æ³•ç¬¬äºŒä¸ªå‚æ•°å›è°ƒå‡½æ•°</span>
state <span class="token operator">=</span> <span class="token punctuation">{</span> time<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
<span class="token function">componentWillMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> time<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>time <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>time<span class="token punctuation">)</span> <span class="token comment">// 2</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>ä¸è¦å°†ä»€ä¹ˆæ•°æ®éƒ½å®šä¹‰åˆ°<code>state</code>é‡Œï¼ŒåšæŒä¸€ä¸ªåŸºæœ¬åŸåˆ™ï¼š<strong>èƒ½å‘åˆ°å±€éƒ¨ä½œç”¨ä¸­çš„ï¼Œèƒ½æ”¾åˆ°<code>this</code>æ™®é€šå±æ€§ä¸­çš„ï¼Œéƒ½ä¸è¦æ”¾åˆ°<code>state</code>ä¸­</strong>ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// å±€éƒ¨ä½œç”¨åŸŸ</span>
<span class="token keyword">let</span> name <span class="token operator">=</span> <span class="token string">'Andraw-lin'</span>
<span class="token keyword">class</span> <span class="token class-name"><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></span>

<span class="token comment">// thisæ™®é€šå±æ€§</span>
<span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'Andraw-lin'</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ol> <h2 id="äº‹ä»¶å¤„ç†"><a href="#äº‹ä»¶å¤„ç†" class="header-anchor">#</a> äº‹ä»¶å¤„ç†</h2> <ol><li><p>React åŸºäº Virtual DOM å®ç°äº†ä¸€ä¸ª <strong>SyntheticEventï¼ˆåˆæˆäº‹ä»¶ï¼‰å±‚</strong>ï¼Œç»„ä»¶ä¸­å®šä¹‰çš„äº‹ä»¶å¤„ç†å™¨ä¼šæ¥æ”¶åˆ°ä¸€ä¸ª SyntheticEvent å¯¹è±¡çš„å®ä¾‹ï¼Œ<strong>ä¸åŸç”Ÿçš„æµè§ˆå™¨äº‹ä»¶ä¸€æ ·æ‹¥æœ‰åŒæ ·çš„æ¥å£ï¼ŒåŒæ ·æ”¯æŒäº‹ä»¶çš„å†’æ³¡æœºåˆ¶</strong>ï¼ˆå³ä½¿ç”¨ stopPropagation å’Œ preventDefault æ–¹æ³•æ¥ä¸­æ–­ï¼‰ã€‚</p></li> <li><p><code>React</code>ä¸­ç»‘å®šäº‹ä»¶æ–¹å¼å’Œ<code>HTML</code>ç»‘å®šäº‹ä»¶åŒºåˆ«ã€‚</p> <ul><li><code>React</code>ç»‘å®šäº‹ä»¶æ˜¯é©¼å³°åŸåˆ™ï¼ˆå¦‚ onClickï¼‰ï¼Œ<code>HTML</code>ç»‘å®šäº‹ä»¶æ˜¯å…¨éƒ¨å°å†™åŸåˆ™ï¼ˆå¦‚ onclickï¼‰ã€‚</li> <li><code>React</code>ç»‘å®šäº‹ä»¶å¤„ç†çš„æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œ<code>HTML</code>ç»‘å®šäº‹ä»¶å¤„ç†çš„æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚</li></ul></li> <li><p><code>React</code>åˆæˆäº‹ä»¶å®ç°ä¸­ï¼Œé‡‡ç”¨äº†<strong>äº‹ä»¶ä»£ç†æœºåˆ¶</strong>ã€‚</p> <p>ä¸ä¼šæŠŠå¤„ç†å‡½æ•°ç›´æ¥ç»‘å®šåˆ°çœŸå®çš„èŠ‚ç‚¹ä¸Šï¼Œè€Œæ˜¯æŠŠæ‰€æœ‰äº‹ä»¶ç»‘å®šåˆ°ç»“æ„çš„æœ€å¤–å±‚ï¼Œä½¿ç”¨ä¸€ä¸ªç»Ÿä¸€çš„äº‹ä»¶ç›‘å¬å™¨ã€‚è¯¥äº‹ä»¶ç›‘å¬å™¨ç»´æŒäº†ä¸€ä¸ªæ˜ å°„æ¥ä¿å­˜æ‰€æœ‰ç»„ä»¶å†…éƒ¨çš„äº‹ä»¶ç›‘å¬å’Œå¤„ç†å‡½æ•°ã€‚å½“ç»„ä»¶æŒ‚è½½æˆ–å¸è½½æ—¶ï¼Œåªæ˜¯åœ¨è¿™ä¸ªç»Ÿä¸€çš„äº‹ä»¶ç›‘å¬å™¨ä¸Šæ’å…¥æˆ–åˆ é™¤ä¸€äº›å¯¹è±¡ã€‚å½“äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œé¦–å…ˆè¢«è¯¥ç»Ÿä¸€çš„äº‹ä»¶ç›‘å¬å™¨å¤„ç†ï¼Œç„¶ååœ¨æ˜ å°„é‡Œæ‰¾åˆ°çœŸæ­£çš„äº‹ä»¶å¤„ç†å‡½æ•°å¹¶è°ƒç”¨ã€‚</p></li> <li><p>åœ¨ä½¿ç”¨ ES6 class æ—¶ï¼Œæ— æ³•è¿›è¡Œè‡ªåŠ¨ç»‘å®š this ä¸º React ç»„ä»¶æœ¬èº«å®ä¾‹ï¼Œè€Œéœ€è¦æ‰‹åŠ¨ç»‘å®šã€‚æ‰‹åŠ¨ç»‘å®šæ–¹å¼æœ‰ä¸‰ç§ï¼Œåˆ†åˆ«ä¸º<code>bind</code>æ–¹æ³•ã€æ„é€ å‡½æ•°å£°æ˜å’Œç®­å¤´å‡½æ•°ã€‚</p> <div class="language-react extra-class"><pre class="language-text"><code>// bindæ–¹æ³•ï¼ˆä¼ å‚æ•°æˆ–ä¸ä¼ å‚æ•°ï¼‰
render() {
  return (
    &lt;button onClick={ this.handleClick.bind(this, 'test') }&gt;Test&lt;/button&gt;
  )
}
// bindæ–¹æ³•ï¼ˆä¸ä¼ å‚æ•°è¿˜å¯ä»¥ä½¿ç”¨åŒå†’å·ï¼Œè¿˜æ˜¯stage0è‰æ¡ˆä¸­æä¾›æ–¹æ¡ˆï¼Œbabelå·²æ”¯æŒï¼‰
render() {
  return (
    &lt;button onClick={ ::this.handleClick.bind }&gt;Test&lt;/button&gt;
  )
}

// æ„é€ å‡½æ•°å£°æ˜
constructor(props) {
  super(props)
  this.handleClick = this.handleClick.bind(this)
}

// ç®­å¤´å‡½æ•°ï¼ˆç¬¬ä¸€ç§æ–¹å¼ï¼‰
handleClick = () =&gt; {
  console.log('hanldeClick')
}
render() {
  return (
    &lt;button onClick={this.handleClick}&gt;
    	Click me
    &lt;/button&gt;
  )
}
// ç®­å¤´å‡½æ•°ï¼ˆç¬¬äºŒç§æ–¹å¼ï¼‰
handleClick() {}
render() {
  return (
    &lt;button onClick={ (e) =&gt; this.handleClick(e) }&gt;
    	Click me
    &lt;/button&gt;
  )
}
</code></pre></div></li> <li><p><code>React</code>ä¸­è‹¥æƒ³å¯¹ç»‘å®šäº‹ä»¶ä¼ å…¥ç›¸åº”çš„å‚æ•°ï¼Œæœ‰ä¸¤ç§æ–¹å¼ï¼Œåˆ†åˆ«æ˜¯<code>bind</code>æ–¹å¼å’Œç®­å¤´å‡½æ•°ã€‚</p> <div class="language-html extra-class"><pre class="language-html"><code>// bindæ–¹æ³•
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token attr-value"><span class="token punctuation">=</span>{this.deleteRow.bind(this,</span> <span class="token attr-name">id)}</span><span class="token punctuation">&gt;</span></span>Delete Row<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>

// ç®­å¤´å‡½æ•°
&lt;button onClick={(e) =&gt; this.deleteRow(id, e)}&gt;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p>é˜»æ­¢ React äº‹ä»¶å†’æ³¡çš„è¡Œä¸ºåªèƒ½ç”¨äº React åˆæˆäº‹ä»¶ç³»ç»Ÿä¸­ï¼Œè€Œæ— æ³•é˜»æ­¢åŸç”Ÿäº‹ä»¶çš„å†’æ³¡**ã€‚**åœ¨åŸç”Ÿäº‹ä»¶ä¸­çš„é˜»æ­¢å†’æ³¡è¡Œä¸ºï¼Œå´å¯ä»¥é˜»æ­¢ React åˆæˆäº‹ä»¶çš„ä¼ æ’­ã€‚</p></li> <li><p>åˆæˆäº‹ä»¶å’ŒåŸç”Ÿäº‹ä»¶åŒºåˆ«ã€‚</p> <ul><li><p>åˆæˆäº‹ä»¶åªæ”¯æŒå†’æ³¡æœºåˆ¶ï¼ŒåŸç”Ÿäº‹ä»¶åˆ™æ”¯æŒ DOM äº‹ä»¶æµï¼ˆå³äº‹ä»¶æ•è·é˜¶æ®µã€ç›®æ ‡å¯¹è±¡æœ¬èº«çš„äº‹ä»¶å¤„ç†ç¨‹åºè°ƒç”¨ã€äº‹ä»¶å†’æ³¡é˜¶æ®µä¸‰ä¸ªé˜¶æ®µï¼‰ã€‚</p></li> <li><p>åˆæˆäº‹ä»¶åªæ˜¯åŸç”Ÿäº‹ä»¶çš„ä¸€ä¸ªå­é›†ã€‚</p></li> <li><p>åˆæˆäº‹ä»¶å¤„ç†çš„æ˜¯å‡½æ•°ï¼ŒåŸç”Ÿäº‹ä»¶å¤„ç†çš„åˆ™æ˜¯å­—ç¬¦ä¸²ã€‚</p></li> <li><p>ç»‘å®šæ–¹å¼ä¸åŒï¼Œä¸»è¦æœ‰ä»¥ä¸‹åŒºåˆ«ã€‚</p> <p>ç»‘å®šåŸç”Ÿäº‹ä»¶çš„æ–¹å¼æœ‰å¾ˆå¤šç§ï¼Œå…·ä½“å¦‚ä¸‹ï¼š</p> <ul><li><p>ç›´æ¥åœ¨ DOM å…ƒç´ ä¸­ç»‘å®š</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>alert(1);<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p>é€šè¿‡å…ƒç´ çš„äº‹ä»¶å±æ€§èµ‹å€¼æ–¹å¼å®ç°ç»‘å®š</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>el<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
</code></pre></div></li> <li><p>é€šè¿‡äº‹ä»¶ç›‘å¬å‡½æ•°æ¥å®ç°ç»‘å®š</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>el<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
el<span class="token punctuation">.</span><span class="token function">attachEvent</span><span class="token punctuation">(</span><span class="token string">'onclick'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></li></ul> <p>React åˆæˆäº‹ä»¶åˆ™ç®€å•å¾ˆå¤šï¼Œå¦‚ä¸‹ï¼š</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleClick<span class="token punctuation">}</span><span class="token operator">&gt;</span>Test<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
</code></pre></div></li></ul></li></ol> <h2 id="ç»„ä»¶é€šä¿¡"><a href="#ç»„ä»¶é€šä¿¡" class="header-anchor">#</a> ç»„ä»¶é€šä¿¡</h2> <p>ç»„ä»¶é—´é€šä¿¡åˆ†ä¸ºå››ç§æƒ…å†µï¼Œåˆ†åˆ«ä¸ºï¼š<strong>çˆ¶ç»„ä»¶å‘å­ç»„ä»¶é€šä¿¡ã€å­ç»„ä»¶å‘çˆ¶ç»„ä»¶é€šä¿¡ã€è·¨çº§ç»„ä»¶é—´é€šä¿¡ã€æ²¡æœ‰åµŒå¥—å…³ç³»çš„ç»„ä»¶é—´é€šä¿¡</strong>ã€‚</p> <ol><li><p>çˆ¶ç»„ä»¶å‘å­ç»„ä»¶é€šä¿¡</p> <p>çˆ¶ç»„ä»¶é€šè¿‡ props å‘å­ç»„ä»¶ä¼ é€’éœ€è¦çš„ä¿¡æ¯ã€‚ç›´æ¥ä¸ŠğŸŒ°ï¼š</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// Parent.js</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span>Component<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> Child <span class="token keyword">from</span> <span class="token string">'./Child'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Parent</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      text<span class="token punctuation">:</span> <span class="token string">'Parent'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
    	<span class="token operator">&lt;</span>Child text<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>text<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// Child.js</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span>Component<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Child</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
    	<span class="token operator">&lt;</span>span<span class="token operator">&gt;</span><span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>text <span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>å­ç»„ä»¶å‘çˆ¶ç»„ä»¶é€šä¿¡</p> <p>å­ç»„ä»¶è‹¥è¦å’Œçˆ¶ç»„ä»¶è¿›è¡Œé€šä¿¡ï¼Œæœ‰ä¸¤ç§å¤„ç†æ–¹å¼ï¼š</p> <ul><li><p>å›è°ƒå‡½æ•°</p> <p>ç±»ä¼¼äº Props ä¼ é€’ï¼Œåªæ˜¯è¿™æ¬¡ä¼ é€’çš„æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œçˆ¶ç»„ä»¶å¯è·å–åˆ°å­ç»„ä»¶è¿è¡Œæ—¶çš„çŠ¶æ€ã€‚ç›´æ¥ä¸ŠğŸŒ°ï¼š</p> <div class="language-react extra-class"><pre class="language-text"><code>// Parent.js
render() {
  return (
    &lt;Child parentClick={this.parentClickFun} /&gt;
  )
}

// Child.js
render() {
  return (
    &lt;span onClick={this.props.parentClick}&gt;&lt;/span&gt;
  )
}
</code></pre></div></li> <li><p>è‡ªå®šä¹‰äº‹ä»¶æœºåˆ¶</p> <p>è‡ªå®šä¹‰äº‹ä»¶å¯ç”¨äºå­ç»„ä»¶å‘çˆ¶ç»„ä»¶ä¹‹é—´çš„é€šä¿¡ï¼Œä½†æ˜¯ä½¿ç”¨æ¬¡æ•°ä¸å¤šï¼Œ<strong>ä¸€èˆ¬æ˜¯ç”¨äºæ²¡æœ‰åµŒå¥—å…³ç³»çš„ç»„ä»¶é—´é€šä¿¡</strong>ï¼Œä¸‹é¢ä¼šè®²è§£ã€‚</p></li></ul></li> <li><p>è·¨çº§ç»„ä»¶é—´é€šä¿¡</p> <p><strong>é€šè¿‡<code>context</code>å¯ä»¥è®©ç¥–å…ˆç»„ä»¶ç›´æ¥æŠŠå±æ€§ä¼ é€’ç»™åä»£ç»„ä»¶</strong>ã€‚</p> <p>å®šä¹‰<code>context</code>éœ€åŒå‘å£°æ˜ï¼Œå³åœ¨ç¥–å…ˆç»„ä»¶ä¸­å£°æ˜é™æ€å±æ€§<code>childContextTypes</code>ï¼Œåœ¨åä»£ç»„ä»¶ä¸­å†æ¬¡å£°æ˜é™æ€å±æ€§<code>contextTypes</code>ï¼Œæœ€ååœ¨ç¥–å…ˆç»„ä»¶æ™®é€šæ–¹æ³•<code>getChildContext</code>ä¸­å®šä¹‰ä¼ è¾“å±æ€§ï¼Œè¿™æ ·åä»£ç»„ä»¶ä¾¿å¯ä»¥ç›´æ¥è·å–ç›¸åº”å±æ€§äº†ã€‚</p> <div class="language-react extra-class"><pre class="language-text"><code>import PropTypes from 'prop-types'
// ç¥–å…ˆç»„ä»¶
class Ancestor extends Component {
  static childContextTypes = {
    name: PropTypes.string
  }
  getChildContext() {
    return {
      name: 'Andraw-lin'
    }
  }
}
// åä»£ç»„ä»¶
class Child extends Component {
  static contextTypes = {
    name: PropTypes.string
  }
}
</code></pre></div></li> <li><p>æ²¡æœ‰åµŒå¥—å…³ç³»çš„ç»„ä»¶é—´é€šä¿¡</p> <p>å¯¹äºæ— åµŒå¥—å…³ç³»çš„ç»„ä»¶é—´é€šä¿¡ï¼Œå¯ä½¿ç”¨è‡ªå®šä¹‰äº‹ä»¶æœºåˆ¶ã€‚éœ€æ³¨æ„æ˜¯ï¼Œ<strong>åœ¨ componentDidMount äº‹ä»¶ä¸­ï¼Œåœ¨ç»„ä»¶æŒ‚è½½å®Œæˆå†è®¢é˜…äº‹ä»¶ï¼Œè€Œåœ¨ componentWillUnmount äº‹ä»¶ä¸­ï¼Œåœ¨ç»„ä»¶å¸è½½å†å–æ¶ˆè®¢é˜…äº‹ä»¶</strong>ã€‚ä½¿ç”¨çš„æ˜¯ Nodejs Events æ¨¡å—å®ç°è‡ªå®šä¹‰äº‹ä»¶æœºåˆ¶ï¼Œç›´æ¥ä¸Šæ —å­ğŸŒ°ï¼š</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// events.js</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> EventEmitter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'events'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">EventEmitter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// one.js</span>
<span class="token keyword">import</span> emitter <span class="token keyword">from</span> <span class="token string">'./events'</span>
<span class="token function">myClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  emitter<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> a<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// two.js</span>
<span class="token keyword">import</span> emitter <span class="token keyword">from</span> <span class="token string">'./events'</span>
<span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>clickEvent <span class="token operator">=</span> emitter<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">,</span> <span class="token parameter">data</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">componentWillUnmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  emitter<span class="token punctuation">.</span><span class="token function">removeLister</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>clickEvent<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ol> <p>å½“ç„¶é™¤äº†ä¸Šè¿°åˆ—ä¸¾é€šä¿¡æ–¹æ³•å¤–ï¼Œè¿˜å¯ä»¥é€šç”¨ redux è¿›è¡Œç®¡ç†ã€‚</p> <h2 id="è¡¨å•å¤„ç†"><a href="#è¡¨å•å¤„ç†" class="header-anchor">#</a> è¡¨å•å¤„ç†</h2> <p>React å¯¹äºè¡¨å•å¤„ç†ä¸Šï¼Œä¸»è¦åˆ†ä¸ºä¸¤ç§ç±»å‹ï¼š<strong>å—æ§ç»„ä»¶å’Œéå—æ§ç»„ä»¶</strong>ã€‚</p> <ol><li><p>å—æ§ç»„ä»¶</p> <p>å½“è¡¨å•çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œéƒ½ä¼šè¢«å†™å…¥åˆ°ç»„ä»¶çš„ state ä¸­ï¼Œåœ¨ React ä¸­è¢«ç§°ä¸ºå—æ§ç»„ä»¶ã€‚</p> <p>åœ¨å—æ§ç»„ä»¶ä¸­ï¼Œç»„ä»¶æ¸²æŸ“å‡ºçš„çŠ¶æ€å’Œå®ƒçš„ value æˆ– checked prop ç›¸å¯¹åº”ã€‚</p> <p>React å—æ§ç»„ä»¶æ›´æ–° state çš„æµç¨‹ä¸»è¦å¦‚ä¸‹ï¼š</p> <ul><li>å¯é€šè¿‡åœ¨åˆå§‹ state ä¸­è®¾ç½®è¡¨å•çš„é»˜è®¤å€¼ï¼›</li> <li>å½“è¡¨å•çš„å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè°ƒç”¨ onChange äº‹ä»¶å¤„ç†å™¨ï¼›</li> <li>äº‹ä»¶å¤„ç†å™¨é€šè¿‡åˆæˆäº‹ä»¶å¯¹è±¡ e æ‹¿åˆ°æ”¹å˜åçš„çŠ¶æ€ï¼Œå¹¶æ›´æ–°åº”ç”¨çš„ stateï¼›</li> <li>é€šè¿‡ setState æ–¹æ³•æ¥è§¦å‘è§†å›¾çš„é‡æ–°æ¸²æŸ“ï¼Œå®Œæˆè¡¨å•ç»„ä»¶å€¼çš„æ›´æ–°ï¼›</li></ul> <p>ç›´æ¥ä¸ŠğŸŒ°ï¼š</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>handleChange <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleChange</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      selectValue<span class="token punctuation">:</span> <span class="token string">'guangzhou'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function">handleChange</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> value <span class="token punctuation">}</span> <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> selectValue<span class="token punctuation">:</span> value <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>select value<span class="token operator">=</span><span class="token punctuation">{</span>selectValue<span class="token punctuation">}</span> onChange<span class="token operator">=</span><span class="token punctuation">{</span>handleChange<span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string">&quot;guangzhou&quot;</span><span class="token operator">&gt;</span>å¹¿å·<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string">&quot;shanghai&quot;</span><span class="token operator">&gt;</span>ä¸Šæµ·<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token string">&quot;beijing&quot;</span><span class="token operator">&gt;</span>åŒ—äº¬<span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å¯ä»¥ç‡åˆ°ï¼ŒReact æœ¬èº«æ˜¯ä¸€ä¸ªå•å‘æ•°æ®æµç»‘å®šï¼Œè€Œåœ¨è¡¨å•ä¸Šä½¿ç”¨ onChange äº‹ä»¶åï¼Œå°±å®ç°äº†åŒå‘æ•°æ®ç»‘å®šã€‚</p></li> <li><p>éå—æ§ç»„ä»¶</p> <p>å¦‚æœä¸€ä¸ªè¡¨å•ç»„ä»¶æ²¡æœ‰ value propsï¼ˆå•é€‰æŒ‰é’®å’Œå¤é€‰æ¡†å¯¹åº”çš„æ˜¯ checked propï¼‰æ—¶ï¼Œå°±å¯ä»¥ç§°ä¸ºéå—æ§ç»„ä»¶ã€‚</p> <p><strong>éå—æ§ç»„ä»¶å’Œå—æ§ç»„ä»¶éƒ½å¯ä»¥ä½¿ç”¨ defaultValue å’Œ defaultChecked æ¥è®¾ç½®ç»„ä»¶çš„é»˜è®¤çŠ¶æ€</strong>ã€‚</p> <p>åœ¨ React ä¸­ï¼Œéå—æ§ç»„ä»¶æ˜¯ä¸€ç§åæ¨¡å¼ï¼Œå®ƒçš„å€¼ä¸å—ç»„ä»¶è‡ªèº«çš„ state æˆ– props æ§åˆ¶ã€‚<strong>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œéƒ½éœ€è¦é€šè¿‡ä¸ºå…¶æ·»åŠ  ref å±æ€§æ¥è®¿é—®æ¸²æŸ“åçš„åº•å±‚ DOM å…ƒç´ </strong>ã€‚</p> <p>ç›´æ¥ä¸Šæ —å­ğŸŒ°ï¼š</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>handleSubmit <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleSubmit</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">handleSubmit</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> value <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>refs<span class="token punctuation">.</span>name
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>form onSubmit<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleSubmit<span class="token punctuation">}</span><span class="token operator">&gt;</span>
      	<span class="token operator">&lt;</span>input ref<span class="token operator">=</span><span class="token string">'name'</span> type<span class="token operator">=</span><span class="token string">'text'</span> defaultValue<span class="token operator">=</span><span class="token string">'Andraw-lin'</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>button type<span class="token operator">=</span><span class="token string">'submit'</span><span class="token operator">&gt;</span>submit<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>å¯¹æ¯”å—æ§ç»„ä»¶å’Œéå—æ§ç»„ä»¶</p> <p>é€šè¿‡ defaultValue æˆ–è€… defaultChecked æ¥è®¾ç½®è¡¨å•çš„é»˜è®¤å€¼ï¼Œä»…ä»…åªä¼šè¢«æ¸²æŸ“ä¸€æ¬¡ï¼Œåœ¨åç»­çš„æ¸²æŸ“ä¸­å¹¶ä¸ä¼šèµ·åˆ°ä½œç”¨ã€‚ä¸¾ä¸ªæ —å­ğŸŒ°ï¼š</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// å—æ§ç»„ä»¶</span>
<span class="token operator">&lt;</span>input 
  value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>value<span class="token punctuation">}</span>
  onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    value<span class="token punctuation">:</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
    
<span class="token comment">// éå—æ§ç»„ä»¶</span>
<span class="token operator">&lt;</span>input 
  defaultValue<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>value<span class="token punctuation">}</span>
  onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    value<span class="token punctuation">:</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
</code></pre></div><p>ä¸Šè¿°ä¾‹å­ä¸­ï¼Œå—æ§ç»„ä»¶å¯ä»¥å°†ç”¨æˆ·è¾“å…¥çš„è‹±æ–‡å­—æ¯è½¬åŒ–ä¸ºå¤§å†™åè¾“å‡ºå±•ç¤ºï¼Œè€Œåœ¨éå—æ§ç»„ä»¶ä¸­åˆ™ä¸ä¼šã€‚<strong>å¤šæ•°æƒ…å†µä¸‹ï¼Œå¯¹äºéå—æ§ç»„ä»¶ï¼Œå¹¶ä¸éœ€è¦é€šè¿‡ change äº‹ä»¶</strong>ã€‚</p> <p>å—æ§ç»„ä»¶å’Œéå—æ§ç»„ä»¶çš„æœ€å¤§åŒºåˆ«å°±æ˜¯ï¼š<strong>éå—æ§ç»„ä»¶çš„çŠ¶æ€å¹¶ä¸ä¼šå—ç”¨ç”¨çŠ¶æ€çš„æ§åˆ¶ï¼Œåº”ç”¨ä¸­ä¹Ÿå¤šäº†å±€éƒ¨ç»„ä»¶çŠ¶æ€ï¼Œè€Œå—æ§ç»„ä»¶çš„å€¼æ¥è‡ªäºç»„ä»¶çš„ state</strong>ã€‚å…·ä½“ä½“ç°åœ¨å¦‚ä¸‹æ–¹é¢ï¼š</p> <ul><li><p>æ€§èƒ½ä¸Šçš„é—®é¢˜</p> <p>å—æ§ç»„ä»¶åœ¨è¡¨å•å€¼æ¯æ¬¡å‘ç”Ÿå˜åŒ–æ—¶ï¼Œéƒ½ä¼šè°ƒç”¨ä¸€æ¬¡ onChange äº‹ä»¶å¤„ç†å™¨ï¼Œå¯¼è‡´äº†ä¸€éƒ¨åˆ†çš„æ€§èƒ½æŸè€—ã€‚</p> <p>ä½¿ç”¨éå—æ§ç»„ä»¶ä¸ä¼šå‡ºç°è¿™äº›é—®é¢˜ï¼Œä½†<strong>åœ¨ React ä¸­ä»ç„¶æ˜¯ä¸æå€¡ä½¿ç”¨éå—æ§ç»„ä»¶</strong>ã€‚</p></li> <li><p>æ˜¯å¦éœ€è¦äº‹ä»¶ç»‘å®š</p> <p>å—æ§ç»„ä»¶å¿…é¡»ä½¿ç”¨ onChange äº‹ä»¶ï¼Œè€Œéå—æ§å¯ä»¥é€‰æ‹©æ€§æ»´ä½¿ç”¨ã€‚</p></li></ul></li> <li><p>è¡¨å•ç»„ä»¶çš„å‡ ä¸ªé‡è¦å±æ€§</p> <ul><li><p>çŠ¶æ€å±æ€§</p> <p>React çš„ form ç»„ä»¶æä¾›äº†å‡ ä¸ªå±æ€§æ¥å±•ç¤ºç»„ä»¶çš„çŠ¶æ€ï¼š</p> <ul><li><strong>value</strong>ï¼š ç±»å‹ä¸º text çš„ input ç»„ä»¶ã€textarea ç»„ä»¶ä»¥åŠ select ç»„ä»¶éƒ½å€ŸåŠ© value å±æ€§æ¥å±•ç¤ºåº”ç”¨çš„çŠ¶æ€ï¼›</li> <li><strong>checked</strong>ï¼šç±»å‹ä¸º radio æˆ– checkbox çš„ç»„ä»¶å€¼ä¸º boolean ç±»å‹çš„ selected å±æ€§ æ¥å±•ç¤ºåº”ç”¨çš„çŠ¶æ€ï¼›</li> <li><strong>selected</strong>ï¼šè¯¥å±æ€§å¯ç”¨äº select ç»„ä»¶ä¸‹é¢çš„ option ä¸Šï¼Œ<strong>React å¹¶ä¸å»ºè®®ä½¿ç”¨è¿™ç§æ–¹æ³•è¡¨ç¤ºçŠ¶æ€ï¼Œè€Œæ¨èä½¿ç”¨ value æ–¹æ³•</strong>ã€‚</li></ul></li> <li><p>äº‹ä»¶å±æ€§</p> <p>åœ¨çŠ¶æ€å±æ€§å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šè§¦å‘ onChange äº‹ä»¶å±æ€§ï¼Œ<strong>å—æ§ç»„ä»¶ä¸­çš„ change äº‹ä»¶ä¸ HTML DOM ä¸­æä¾›çš„ input äº‹ä»¶è¡Œä¸ºç±»ä¼¼</strong>ã€‚</p></li></ul></li></ol> <h2 id="æ ·å¼å¤„ç†"><a href="#æ ·å¼å¤„ç†" class="header-anchor">#</a> æ ·å¼å¤„ç†</h2> <p>React ä¸­å¯é€šè¿‡ style prop æ¥ç»™ç»„ä»¶è®¾ç½®è¡Œå†…æ ·å¼ï¼Œä½†éœ€æ³¨æ„çš„æ˜¯ï¼Œ<strong>style prop å¿…é¡»æ˜¯ä¸€ä¸ªå¯¹è±¡</strong>ã€‚åœ¨è®¾ç½®æ ·å¼æ—¶ï¼Œéœ€è¦æ³¨æ„ä¸¤ç‚¹ï¼š</p> <ul><li>è‡ªå®šä¹‰ç»„ä»¶å»ºè®®æ”¯æŒ className propï¼Œè®©ç”¨æˆ·ä½¿ç”¨æ—¶æ·»åŠ è‡ªå®šä¹‰æ ·å¼ï¼›</li> <li>è®¾ç½®è¡Œå†…æ ·å¼æ—¶è¦ä½¿ç”¨å¯¹è±¡ï¼›</li></ul> <p>ç›´æ¥ä¸Šæ —å­ğŸŒ°ï¼š</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// className Prop</span>
<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> myClass <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>name <span class="token operator">?</span> <span class="token string">'myNameClass'</span> <span class="token punctuation">:</span> <span class="token string">'myClass'</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>span className<span class="token operator">=</span><span class="token punctuation">{</span>myClass<span class="token punctuation">}</span><span class="token operator">&gt;</span>className<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// style Prop</span>
<span class="token keyword">const</span> style <span class="token operator">=</span> <span class="token punctuation">{</span>
  color<span class="token punctuation">:</span> <span class="token string">'white'</span><span class="token punctuation">,</span>
  msTransition<span class="token punctuation">:</span> <span class="token string">'all'</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> component <span class="token operator">=</span> <span class="token operator">&lt;</span>span style<span class="token operator">=</span><span class="token punctuation">{</span>style<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre></div><ol><li><p>React æ ·å¼å¤„ç†</p> <ul><li><p>æ ·å¼ä¸­åƒç´ å€¼</p> <p><strong>React ä¼šè‡ªåŠ¨å¯¹æ”¯æŒæ•°å€¼pxçš„å±æ€§æ·»åŠ  px</strong>ï¼Œç›´æ¥ä¸ŠğŸŒ°ï¼š</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> style <span class="token operator">=</span> <span class="token punctuation">{</span> height<span class="token punctuation">:</span> <span class="token number">10</span> <span class="token punctuation">}</span>
</code></pre></div><p>å¦å¤–ï¼Œæœ‰äº›å±æ€§é™¤äº†æ”¯æŒ px ä¸ºå•ä½çš„åƒç´ å€¼ï¼Œè¿˜æ”¯æŒæ•°å­—ç›´æ¥ä½œä¸ºå€¼ï¼Œæ­¤æ—¶ React å¯¹è¿™äº›æ”¯æŒæ•°å­—çš„å±æ€§åˆ™ä¸ä¼šè‡ªåŠ¨æ·»åŠ  pxï¼Œå¦‚ lineHeightã€‚</p></li> <li><p>ä½¿ç”¨ classnames åº“</p> <p>åœ¨ä¸Šè¿° className prop æ —å­ä¸­ï¼Œå¯ä»¥çœ‹åˆ°ï¼ŒåŠ¨æ€ç±»åéœ€æ ¹æ®çŠ¶æ€æ¥å†³å®šæ˜¯å¦æ·»åŠ ï¼Œä¸€æ—¦ä¸€ä¸ªæ ‡ç­¾éœ€è¦ç‰¹åˆ«å¤šæ ·å¼åä¹Ÿå°±å¯¼è‡´äº§ç”Ÿå¤šä¸ªå®šä¹‰ï¼Œå› æ­¤å¹¶ä¸å‹å¥½ã€‚ä½¿ç”¨ classnames åº“åˆ™å¯ä»¥è¿›è¡Œè§£å†³ï¼Œåˆ©ç”¨è¯­æ³•ç³–æé«˜å¼€å‘æ•ˆç‡ï¼Œå¯¹ä¸Šè¿° className prop æ —å­ä½¿ç”¨ classnames åº“è¿›è¡Œæ”¹é€ ï¼š</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> classNames <span class="token keyword">from</span> <span class="token string">'classnames'</span>

<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> myClassContainer <span class="token operator">=</span> <span class="token function">classNames</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token string">'myNameClass'</span><span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>name<span class="token punctuation">,</span>
    <span class="token string">'myClass'</span><span class="token punctuation">:</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>name
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>span className<span class="token operator">=</span><span class="token punctuation">{</span>myClassContainer<span class="token punctuation">}</span><span class="token operator">&gt;</span>className<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul></li> <li><p>CSS Modules</p> <p>æœ‰å…´è¶£çš„å¯ä»¥å…ˆç†è§£ä¸€ä¸‹ <a href="https://github.com/css-modules/css-modules" target="_blank" rel="noopener noreferrer">CSS Modules<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>ã€‚ç›®å‰å°±å…ˆä¸Šä¸€ä¸ª CSS Modules ç»“åˆ React å®è·µï¼Œç›´æ¥ä¸Šæ —å­ğŸŒ°ï¼š</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// index.css</span>
<span class="token punctuation">.</span>root <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span>
<span class="token punctuation">.</span>confirm <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span>
<span class="token punctuation">.</span>disabledConfirm <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span>

<span class="token comment">// index.js</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> classNames <span class="token keyword">from</span> <span class="token string">'classnames'</span>
<span class="token keyword">import</span> indexStyles <span class="token keyword">from</span> <span class="token string">'./index.css'</span>

<span class="token keyword">class</span> <span class="token class-name">Index</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> cx <span class="token operator">=</span> <span class="token function">classNames</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      confirm<span class="token punctuation">:</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>disabled<span class="token punctuation">,</span>
      disabledConfirm<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>disabled
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token punctuation">{</span>indexStyles<span class="token punctuation">.</span>root<span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>a className<span class="token operator">=</span><span class="token punctuation">{</span>indexStyles<span class="token punctuation">[</span>cx<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>Confirm<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
                  
</code></pre></div><p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œç»„ä»¶æœ€å¤–å±‚çš„èŠ‚ç‚¹å¯¹åº”çš„ class åç§°ä¸º rootã€‚ä¹Ÿè®¸æœ‰äººä¼šå‘ç°ï¼Œæˆ‘ä»¬éœ€è¦æ‹¼å‘½åœ°å†™ style.* æ¥è·å–å¯¹åº”çš„ç±»åï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆç¹çå’Œé‡å¤çš„å·¥ä½œï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨ react-css-modules åº“ã€‚ç›´æ¥ä¸Šæ —å­ğŸŒ°ï¼š</p> <div class="language-react extra-class"><pre class="language-text"><code>// index.js
import React, { Component } from 'react'
import classNames from 'classnames'
import CSSModule from 'react-css-modules'
import indexStyles from './index.css'

class Index extends Component {
  render() {
    const cx = classNames({
      confirm: !this.state.disabled,
      disabledConfirm: this.state.disabled
    })
    return (
      &lt;div styleName={root}&gt;
        &lt;a styleName={cx}&gt;Confirm&lt;/a&gt;
      &lt;/div&gt;
    )
  }
}
export default CSSModules(Index, indexStyles)
</code></pre></div><p>ä½¿ç”¨ react-css-module å¯¹æ¯”åŸæœ‰çš„ CSS Moduleï¼Œå…·ä½“æœ‰å¦‚ä¸‹ç‰¹ç‚¹ï¼š</p> <ul><li><p>ä¸å†éœ€è¦å…³æ³¨æ˜¯å¦ä½¿ç”¨é©¼å³°æ¥å‘½å class åï¼›</p></li> <li><p>ä¸ç”¨æ¯ä¸€æ¬¡ä½¿ç”¨ CSS Module çš„æ—¶å€™éƒ½å…³è” style å¯¹è±¡ï¼›</p></li> <li><p>ä½¿ç”¨ CSS Module å®¹æ˜“ä½¿ç”¨ :global å»è§£å†³ç‰¹æ®Šæƒ…å†µã€‚è€Œä½¿ç”¨ react-css-module åˆ™æ˜¯ä½¿ç”¨ styleName æ¥è¡¨ç¤ºå±€éƒ¨ï¼Œä½¿ç”¨ className è¡¨ç¤ºå…¨å±€ã€‚ç›´æ¥ä¸Šæ —å­ï¼š</p> <div class="language-html extra-class"><pre class="language-html"><code>// CSS Module
&lt;div className={indexStyle['test']}&gt;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

// react css module
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">styleName</span><span class="token attr-value"><span class="token punctuation">=</span>{global-css}</span> <span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div></li> <li><p>å½“ styleName å…³è”äº†ä¸€ä¸ª undefined CSS Module æ—¶ï¼Œreact-css-module ä¼šå‘å‡ºä¸€ä¸ªè­¦å‘Šï¼›</p></li></ul></li></ol> <h2 id="ç»„ä»¶çš„æŠ½è±¡ä¸å¤ç”¨"><a href="#ç»„ä»¶çš„æŠ½è±¡ä¸å¤ç”¨" class="header-anchor">#</a> ç»„ä»¶çš„æŠ½è±¡ä¸å¤ç”¨</h2> <p>åœ¨æ—§ç‰ˆæœ¬<code>React</code>é‡Œï¼Œå®ç°ç»„ä»¶é—´çš„æŠ½è±¡å’Œå¤ç”¨ä¸»è¦é€šè¿‡<code>mixin</code>å®ç°ã€‚ç”±äº<code>mixin</code>æ–¹æ³•ä¸€è‡´å­˜åœ¨é‡åè¦†ç›–é—®é¢˜ï¼Œå¯¹äºå¤§å‹é¡¹ç›®å°†ä¼šæ˜¯ä¸€ä¸ªè‡´å‘½ç¼ºé™·ï¼Œå› æ­¤åœ¨æ–°ç‰ˆæœ¬ä¸­å·²è¢«æ¶ˆé™¤ã€‚</p> <p>ç›®å‰<strong>è¦å®ç°ç»„ä»¶çš„æŠ½è±¡ä¸å¤ç”¨</strong>ï¼Œä¸»è¦æœ‰ä¸‰ç§æ–¹æ³•ï¼Œåˆ†åˆ«æ˜¯<strong>ç»§æ‰¿ã€ç»„åˆå’Œé«˜é˜¶ç»„ä»¶</strong>ã€‚</p> <ol><li><p>ç»§æ‰¿</p> <p>å¤„ç†A is Bé—®é¢˜ã€‚è‹¥ä¸¤ä¸ªä»¥ä¸Šçš„ç»„ä»¶ä¸€éƒ¨åˆ†åŠŸèƒ½æ˜¯ä¸€æ ·çš„ï¼Œé‚£ä¹ˆå¯æŠ½è±¡ä¸ºä¸€ä¸ªçˆ¶ç±»ï¼Œé€šè¿‡ç»§æ‰¿è§£å†³é‡å¤é—®é¢˜ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">PureComponent</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">shouldComponentUpdate</span><span class="token punctuation">(</span><span class="token parameter">nextProp<span class="token punctuation">,</span> nextState</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span>props<span class="token punctuation">,</span> state<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span>
    <span class="token keyword">function</span> <span class="token function">shallowCompare</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">===</span> b<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">!==</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span>
      <span class="token keyword">return</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">every</span><span class="token punctuation">(</span><span class="token parameter">k</span> <span class="token operator">=&gt;</span> a<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">===</span> b<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token operator">!</span><span class="token function">shallowCompare</span><span class="token punctuation">(</span>nextProp<span class="token punctuation">,</span> props<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token function">shallowCompare</span><span class="token punctuation">(</span>nextState<span class="token punctuation">,</span> state<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Parent</span> <span class="token keyword">extends</span> <span class="token class-name">PureComponent</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Child</span> <span class="token keyword">extends</span> <span class="token class-name">PureComponent</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div><p>å…³äºç»§æ‰¿ä¸€å®šè¦è°¨æ…ï¼Œå¦‚æœæƒ³ä¸æ¸…æ¥šå°±ä¸è¦æŠ½è±¡çˆ¶ç±»ã€‚ç»§æ‰¿è®¾è®¡ä¸å¥½ï¼Œåˆ°åé¢å°±ä¼šéå¸¸è„†å¼±å¹¶ä¸”ä¸å¥½ç»´æŠ¤ã€‚</p></li> <li><p>ç»„åˆ</p> <p>å¤„ç†A has Bé—®é¢˜ã€‚æ¯”å¦‚æ±½è½¦å’Œäººéƒ½ä¼šè·‘ï¼Œäººå’Œè·‘ä¸æ˜¯â€œæ˜¯â€å…³ç³»ï¼Œè€Œæ˜¯â€œæ‹¥æœ‰â€å…³ç³»ï¼Œè‹¥ä½¿ç”¨ç»§æ‰¿çš„æ–¹æ³•å®ç°æŠ½çº¿ï¼Œçˆ¶ç±»å°±å¾ˆéš¾æŠ½è±¡å‡ºæ¥ã€‚è€Œç»„åˆå´å¯ä»¥å¾ˆå¥½å®ç°</p> <p><strong><code>javascript</code>ä¸­å®ç°ç»„åˆæ–¹å¼æœ‰å¤šç§ï¼Œä»¥ä¸‹å°±ä»‹ç»ä¸‰ç§ï¼Œåˆ†åˆ«ä¸ºå†…éƒ¨è°ƒç”¨ã€æ‹·è´ã€ES5ä¸­<code>mixin</code>æ–¹æ³•</strong>ã€‚</p> <ul><li><p>å†…éƒ¨è°ƒç”¨</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> map <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>runState <span class="token operator">=</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
  <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>runState <span class="token operator">=</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">People</span> <span class="token punctuation">{</span>
  <span class="token function">run</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> map<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">stop</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> map<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>æ‹·è´</p> <p>å®ç°ä¸€ä¸ª<code>extend</code>å‡½æ•°ï¼Œä¹Ÿå¯ä»¥å€Ÿç”¨<code>jQuery</code>ä¸­<code>$.extends</code>æ–¹æ³•ï¼Œåˆæˆ–è€…<code>ES6</code>ä¸­çš„<code>Object.assign</code>æ–¹æ³•ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">extend</span><span class="token punctuation">(</span><span class="token parameter">obj1<span class="token punctuation">,</span> obj2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>obj2<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">key</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    obj1<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> obj2<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">People</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token comment">// ä½¿ç”¨æ—¶</span>
<span class="token function">extend</span><span class="token punctuation">(</span><span class="token class-name">People</span><span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> map<span class="token punctuation">)</span>
$<span class="token punctuation">.</span><span class="token function">extends</span><span class="token punctuation">(</span><span class="token class-name">People</span><span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> map<span class="token punctuation">)</span>
Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token class-name">People</span><span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> map<span class="token punctuation">)</span>
</code></pre></div></li> <li><p>React ES5 mixin</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> setIntervalMixin <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">componentWillMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>intervals <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>intervals<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">setInterval</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">componentWillUnmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>intervals<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>clearInterval<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> Demo1 <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  mixins<span class="token punctuation">:</span> <span class="token punctuation">[</span>setIntervalMixin<span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> Demo2 <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  mixins<span class="token punctuation">:</span> <span class="token punctuation">[</span>setIntervalMixin<span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>ä¸æ¨èçš„åšæ³•ã€‚</p></li></ul></li> <li><p>é«˜é˜¶ç»„ä»¶</p> <p>å®ç°é«˜é˜¶ç»„ä»¶çš„æ–¹å¼æœ‰ä¸¤ç§ï¼š<strong>è°ƒç”¨ä¼ å…¥çš„ç»„ä»¶</strong>å’Œ<strong>ç»§æ‰¿ä¼ å…¥çš„ç»„ä»¶</strong>ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// è°ƒç”¨ä¼ å…¥çš„ç»„ä»¶</span>
<span class="token keyword">function</span> <span class="token constant">HOC1</span><span class="token punctuation">(</span><span class="token parameter">InnerComponnet</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">class</span> <span class="token class-name">WrapComponent</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">(</span>
      	<span class="token operator">&lt;</span>InnerComponent <span class="token operator">...</span>this<span class="token punctuation">.</span>props<span class="token operator">&gt;</span>
        	<span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>children <span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>InnerComponent<span class="token operator">&gt;</span>
      <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> Demo1 <span class="token operator">=</span> <span class="token keyword">class</span> <span class="token class-name">extends</span> Component <span class="token punctuation">{</span><span class="token punctuation">}</span>
Demo1 <span class="token operator">=</span> <span class="token constant">HOC1</span><span class="token punctuation">(</span>Demo1<span class="token punctuation">)</span>

<span class="token comment">// ç»§æ‰¿ä¼ å…¥çš„ç»„ä»¶</span>
<span class="token keyword">function</span> <span class="token constant">HOC2</span><span class="token punctuation">(</span><span class="token parameter">InnerComponent</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">class</span> <span class="token class-name">WrapComponent</span> <span class="token keyword">extends</span> <span class="token class-name">InnerComponent</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> Demo2 <span class="token operator">=</span> <span class="token keyword">class</span> <span class="token class-name">extends</span> Component <span class="token punctuation">{</span><span class="token punctuation">}</span>
Demo2 <span class="token operator">=</span> <span class="token constant">HOC2</span><span class="token punctuation">(</span>Demo2<span class="token punctuation">)</span>
</code></pre></div><p>æ³¨æ„ï¼š<strong>ä¸€èˆ¬åªåœ¨ä¼ å…¥ç»„ä»¶å¤–å›´è¿›è¡Œä¸€äº›æ“ä½œæ—¶ï¼Œå»ºè®®ä½¿ç”¨ç¬¬ä¸€ç§æ–¹æ³•ã€‚å¦‚æœæƒ³åœ¨ä¼ å…¥ç»„ä»¶çš„å†…éƒ¨è¿›è¡Œä¸€äº›æ“ä½œï¼Œæ¯”å¦‚æ”¹å†™<code>render</code>ï¼Œåˆ™ä½¿ç”¨ç¬¬äºŒç§æ–¹æ³•</strong>ã€‚</p></li></ol> <h2 id="dom-ç›¸å…³"><a href="#dom-ç›¸å…³" class="header-anchor">#</a> DOM ç›¸å…³</h2> <ol><li><p><code>React</code>é€šè¿‡<code>ref</code>ç»™äº†æˆ‘ä»¬é¥®ç”¨ç»„ä»¶å’Œ<code>DOM</code>å…ƒç´ çš„èƒ½åŠ›ã€‚</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>input ref<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">input</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>nameInput <span class="token operator">=</span> input<span class="token punctuation">}</span> type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>ref</code>ä¸­å€¼è‹¥ä¸ºå‡½æ•°æ—¶ï¼Œä¼šåœ¨<code>componentDidMount</code>å’Œ<code>componentDidUpdate</code>åæ‰§è¡Œã€‚</p></li> <li><p><code>React</code>ä¼šå¯¹è¾“å‡ºå†…å®¹è¿›è¡Œ<code>XSS</code>è¿‡æ»¤ï¼Œä½†åœ¨æŸäº›æƒ…å†µä¸‹ä¸æƒ³è¦è¿™ä¸ªåŠŸèƒ½ï¼Œæ¯”å¦‚åœ¨æ¥å£è¿”å›<code>HTML</code>ç‰‡æ®µæƒ…å†µä¸‹ï¼Œéœ€è¦ç”¨åˆ°**<code>dangerouslySetInnerHTML</code>ï¼Œå®ƒå¯ä»¥å°†<code>HTML</code>è®¾ç½®åˆ°<code>DOM</code>ä¸Š**ã€‚</p></li></ol> <h2 id="hook"><a href="#hook" class="header-anchor">#</a> Hook</h2> <ol><li><p>ä½¿ç”¨<code>Hook</code>çš„ç›®çš„åœ¨äºä»¥ä¸‹å‡ ä¸ªæ–¹é¢ã€‚</p> <ul><li><strong>ç»„ä»¶é—´çš„é‡å¤é€»è¾‘è¿›è¡Œå¤ç”¨</strong>ã€‚è™½ç„¶å¯ä½¿ç”¨<code>render props</code>å’Œé«˜é˜¶ç»„ä»¶æ–¹æ¡ˆï¼Œä½†è¿™ä¸¤ç±»æ–¹æ¡ˆéƒ½éœ€è¦é‡æ–°ç»„ç»‡ç»„ç»“æ„ï¼Œå¯¼è‡´ä»£ç éš¾ä»¥ç†è§£ä»¥åŠä¸å¥½ç»´æŠ¤ã€‚</li> <li><strong>å¯¹ç»„ä»¶å†…ç›¸å…³è”çš„çŠ¶æ€ä»¥åŠé€»è¾‘ç»Ÿä¸€ç®¡ç†</strong>ã€‚å¦‚è·å–åç«¯æ•°æ®ç›¸å…³å˜é‡ä»¥åŠé€»è¾‘ã€è®¢é˜…äº‹ä»¶ä»¥åŠæ¶ˆé™¤äº‹ä»¶ç­‰ã€‚</li> <li><strong>å¯¹å‡½æ•°å¼ç»„ä»¶è¿›è¡Œæ‰©å±•</strong>ï¼Œé¿å…äº†æ—§ç‰ˆæœ¬å‡½æ•°å¼ç»„ä»¶éœ€è¦å¢æ·»çŠ¶æ€ç®¡ç†æˆ–ç”Ÿå‘½å‘¨æœŸç­‰é€»è¾‘æ—¶ï¼Œå¿…è¦åœ°è½¬åŒ–ä¸ºä¸å¥½ç†è§£çš„<code>class</code>ç»„ä»¶ã€‚</li></ul> <p>å¦å¤–ï¼Œéœ€æ³¨æ˜çš„æ˜¯ï¼Œ<code>Hook</code>å¹¶ä¸æ‰“ç®—æ›¿ä»£<code>class</code>ï¼Œåªæ˜¯æ›´å¥½æ»´æ‹“å±•å‡½æ•°å¼ç»„ä»¶ã€å¤ç”¨ç»„ä»¶é—´é€»è¾‘ä»¥åŠè®²ç›¸å…³è”é€»è¾‘ç»Ÿä¸€ç®¡ç†ã€‚<strong>æœ€é‡è¦çš„æ˜¯ï¼ŒHook å’Œç°æœ‰ä»£ç å¯ä»¥åŒæ—¶å·¥ä½œï¼Œä½ å¯ä»¥æ¸è¿›å¼åœ°ä½¿ç”¨ä»–ä»¬ï¼Œé‡‡ç”¨çš„æ˜¯æ¸è¿›ç­–ç•¥ã€‚</strong></p></li> <li><p><code>Hook</code>çš„æœ¬è´¨å°±æ˜¯ Javascript å‡½æ•°ï¼Œä½¿ç”¨å®ƒæ—¶å¿…é¡»éµå¾ªä¸¤æ¡è§„åˆ™ã€‚</p> <ul><li><strong>åªåœ¨å‡½æ•°ç»„ä»¶å†…çš„æœ€é¡¶å±‚ä½¿ç”¨<code>Hook</code></strong>ã€‚å³ä¸èƒ½åœ¨ä¾‹å¦‚<code>for</code>å¾ªç¯ã€æ¡ä»¶è¯­å¥ç­‰é‡Œé¢ä½¿ç”¨<code>Hook</code>ã€‚</li> <li><strong>åªåœ¨<code>React</code>å‡½æ•°ç»„ä»¶å†…è°ƒç”¨<code>Hook</code></strong>ã€‚</li></ul></li> <li><p>åœ¨å•ä¸ªç»„ä»¶ä¸­ä½¿ç”¨å¤šä¸ª<code>State Hook</code>æˆ–<code>Effect Hook</code>æ—¶ï¼Œ<code>React</code>æ˜¯å¦‚ä½•çŸ¥é“å“ªä¸ª<code>state</code>å¯¹åº”å“ªä¸ª<code>useState</code>æˆ–<code>useEffect</code>çš„ï¼Ÿ</p> <p>ç­”æ¡ˆå°±æ˜¯**<code>React</code>é çš„æ˜¯<code>Hook</code>è°ƒç”¨çš„é¡ºåº**ã€‚ç›´æ¥ä¸Šä¸ªæ —å­ğŸŒ°ã€‚</p> <div class="language-react extra-class"><pre class="language-text"><code>function Form() {
  const [name, setName] = useState('Mary')
  useEffect(() =&gt; {
    localStorage.setItem('name', name)
  })
  
  const [surname, setSurname] = useState('haha')
  useEffect(() =&gt; {
    document.title = name + ' ' + surname
  })
}
// é¦–æ¬¡æ¸²æŸ“
useState('Mary')
useEffect()
useState('haha')
useEffect()
// äºŒæ¬¡æ¸²æŸ“
useState('Mary')
useEffect()
useState('haha')
useEffect()
</code></pre></div><p>åªè¦<code>Hook</code>çš„è°ƒç”¨é¡ºåºåœ¨å¤šæ¬¡æ¸²æŸ“ä¹‹é—´ä¿æŒä¸€è‡´ï¼Œ<code>React</code>å°±èƒ½æ­£ç¡®æ»´å¥–å†…éƒ¨<code>state</code>å’Œå¯¹åº”<code>Hook</code>è¿›è¡Œå…³è”ï¼Œ<strong>ä¸€æ—¦éƒ¨åˆ†ä¸­é—´æŸä¸ª<code>useState</code>æˆ–<code>useEffect</code>å¤„äºæ¡ä»¶è¯­å¥ä¸­ï¼Œé‚£ä¹ˆåé¢çš„<code>useState</code>æˆ–<code>useEffect</code>éƒ½æ— æ³•æ­£ç¡®è¿è¡Œæˆ–è·å–æ­£ç¡®çš„å€¼</strong>ã€‚</p></li> <li><p><code>State Hook</code>ä¸­ä½¿ç”¨çš„ API æ˜¯<code>useState</code>ï¼Œæ ¼å¼å¦‚ä¸‹ã€‚</p> <div class="language-react extra-class"><pre class="language-text"><code>const [name, setName] = useState(initialState)
// è¿”å›ä¸€ä¸ªstateï¼Œä»¥åŠæ›´æ–°stateçš„å‡½æ•°
// åœ¨åˆå§‹æ¸²æŸ“æœŸé—´ï¼Œè¿”å›çš„çŠ¶æ€stateå’Œä¼ å…¥ç¬¬ä¸€ä¸ªå‚æ•°initialStateå€¼ç›¸åŒ
// åœ¨åç»­é‡æ–°æ¸²æŸ“ä¸­ï¼ŒuseStateè¿”å›çš„ç¬¬ä¸€ä¸ªå€¼å°†å§‹ç»ˆæ˜¯æ›´æ–°åæœ€æ–°çš„state
</code></pre></div><p><code>setName</code>æ›´æ–°å‡½æ•°å‚æ•°å¯ä»¥æ˜¯æ•°å­—ã€å­—ç¬¦ä¸²æˆ–å›è°ƒå‡½æ•°ç­‰ã€‚<strong>å½“å‚æ•°æ˜¯å›è°ƒå‡½æ•°æ—¶ï¼Œå›è°ƒå‡½æ•°çš„å‚æ•°å°±æ˜¯æ›´æ–°å¯¹åº”<code>state</code>å‰çš„å€¼</strong>ï¼Œçœ‹æ —å­ğŸŒ°ã€‚</p> <div class="language-react extra-class"><pre class="language-text"><code>&lt;button onClick={() =&gt; setName(preName =&gt; preName + 'haha.')}&gt;&lt;/button&gt;
// å‚æ•°preNameå°±æ˜¯çŠ¶æ€Nameä¸Šä¸€æ¬¡æ›´æ–°çš„å€¼
</code></pre></div><p><strong>ä¸ class ç»„ä»¶ä¸­<code>setState</code>æ–¹æ³•ä¸åŒï¼Œ<code>useState</code>ä¸ä¼šè‡ªåŠ¨åˆå¹¶æ›´æ–°å¯¹è±¡</strong>ã€‚ç›´æ¥çœ‹ğŸŒ°ã€‚</p> <div class="language-react extra-class"><pre class="language-text"><code>const [name, setName] = useState({ name: 'haha', age: 12 })
console.log(name)
// ç¬¬ä¸€æ¬¡è¾“å‡ºï¼š{ name: 'haha', age: 12 }
// ç¬¬äºŒæ¬¡è¾“å‡ºï¼š{ name: 'hehe' }
return &lt;button onClick={() =&gt; setName({ name: 'hehe' })}&gt;test&lt;/button&gt;

// é’ˆå¯¹ä¸ä¼šåˆå¹¶æƒ…å†µï¼Œå¤„ç†æ–¹æ¡ˆæœ‰useReducerä»¥åŠä½¿ç”¨å±•å¼€è¿ç®—ï¼Œä¸‹é¢å°±ä»‹ç»ä¸€ä¸‹å±•å¼€è¿ç®—ç¬¦åšæ³•
return &lt;button onClick={() =&gt; setName(preName =&gt; {...preName, ...{ name: hehe }})}&gt;test&lt;/button&gt;
</code></pre></div><p>æœ€åï¼Œ<strong><code>setName</code>æ›´æ–°å‡½æ•°ä¸­å‚æ•°ï¼Œå…¶å†…éƒ¨é‡‡ç”¨çš„æ˜¯<code>Object.is</code>æ¯”è¾ƒç®—æ³•è¿›è¡Œæ¯”è¾ƒçš„ï¼Œè‹¥ä¼ å…¥å‚æ•°ä¸å˜ï¼Œåˆ™å°†ä¼šè·³è¿‡å­ç»„ä»¶çš„æ¸²æŸ“ä»¥åŠ<code>effect</code>çš„æ‰§è¡Œ</strong>ã€‚</p></li> <li><p><code>Effect Hook</code>ä¸­ä½¿ç”¨çš„ API æ˜¯<code>useEffect</code>ï¼Œæ ¼å¼å¦‚ä½•ã€‚</p> <div class="language-react extra-class"><pre class="language-text"><code>useEffect(function)
// æ¥æ”¶ä¸€ä¸ªåŒ…å«å…±åŒé€»è¾‘çš„å‡½æ•°ï¼Œå¦‚æ”¹å˜DOMã€è®¢é˜…å–æ¶ˆäº‹ä»¶ç­‰
</code></pre></div><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<strong><code>effect</code>å°†åœ¨æ¯è½®æ¸²æŸ“ç»“æŸåæ‰§è¡Œï¼Œä½†ä½ å¯ä»¥é€‰æ‹©è®©å®ƒæŸäº›å€¼æ”¹å˜æ—¶æ‰æ‰§è¡Œ</strong>ã€‚</p> <p><strong>React å…è®¸<code>effect</code>è¿”å›ä¸€ä¸ªå‡½æ•°ä»£è¡¨ç”Ÿå‘½å‘¨æœŸ<code>componentWillUnmount</code>å›è°ƒ</strong>ã€‚ç›´æ¥çœ‹ğŸŒ°ã€‚</p> <div class="language-react extra-class"><pre class="language-text"><code>// useEffectä¸­å‡½æ•°å°±æ˜¯componentDidMountå’ŒcomponentDidUpdateç»“åˆï¼Œè€Œè¿”å›å‡½æ•°åˆ™æ˜¯componentWillUnmount
useEffect(() =&gt; {
  const subscription = props.source.subscribe()
  return () =&gt; {
    subscription.unsubscribe() // æ¸…é™¤è®¢é˜…
  }
})
</code></pre></div><p>ç»„ä»¶åœ¨å¤šæ¬¡æ¸²æŸ“æ—¶ï¼Œåˆ™<strong>åœ¨æ‰§è¡Œä¸‹ä¸€ä¸ª<code>effect</code>ä¹‹å‰ï¼Œä¸Šä¸€ä¸ª<code>effect</code>å°±å·²è¢«æ¸…é™¤</strong>ã€‚åœ¨ä¸Šè¿°ä¾‹å­ä¸­ï¼Œç»„ä»¶çš„æ¯ä¸€æ¬¡æ›´æ–°éƒ½ä¼šåˆ›å»ºæ–°çš„è®¢é˜…ã€‚</p> <p><code>useEffect</code>ä¸ç”Ÿå‘½å‘¨æœŸ<code>componentDidMount</code>å’Œ<code>componentDidUpdate</code>ä¸åŒçš„æ˜¯ï¼Œ<strong>åœ¨æµè§ˆå™¨å®Œæˆå¸ƒå±€ä¸ç»˜åˆ¶åï¼Œæ‰ä¼šæŒ‰é¡ºåºæ‰§è¡Œ<code>useEffect</code>ä¸­çš„å‡½æ•°</strong>ã€‚è‹¥<strong>æƒ³åŒæ­¥è¿›è¡Œï¼Œå¯ä½¿ç”¨<code>useLayoutEffect</code>æ¥å¤„ç†</strong>ã€‚</p> <p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>effect</code>ä¼šåœ¨æ¯è½®ç»„ä»¶æ¸²æŸ“å®Œæˆåæ‰§è¡Œï¼Œä¸€æ—¦<code>effect</code>çš„ä¸€æ¥å‘ç”Ÿå˜åŒ–ï¼Œå®ƒå°±ä¼šè¢«é‡æ–°åˆ›å»ºã€‚<strong>ç»™<code>useEffect</code>ä¼ é€’ç¬¬äºŒä¸ªå‚æ•°ï¼Œå°±æ˜¯ä½œä¸º<code>effect</code>æ‰€ä¾èµ–çš„æ•°ç»„ï¼Œåªæœ‰å½“ä¾èµ–çš„æ•°ç»„ä¸­çš„å…ƒç´ å€¼å˜åŒ–æ—¶æ‰ä¼šæ‰§è¡Œ</strong>ã€‚çœ‹æ —å­ğŸŒ°ã€‚</p> <div class="language-react extra-class"><pre class="language-text"><code>useEffect(() =&gt; {
  const subscription = props.source.subscribe()
  return () =&gt; {
    subscription.unsubscribe() // æ¸…é™¤è®¢é˜…
  }
}, [props.source])
// åªæœ‰å½“props.sourceæ”¹å˜æ—¶ï¼ŒuseEffectçš„å›è°ƒæ‰ä¼šæ‰§è¡Œ
</code></pre></div><p>å¦‚æœæƒ³æ‰§è¡Œåªè¿è¡Œä¸€æ¬¡çš„<code>effect</code>ï¼ˆä»…åœ¨ç»„ä»¶æŒ‚è½½å’Œå¸è½½æ—¶æ‰§è¡Œï¼‰ï¼Œå¯<strong>ä¼ é€’ä¸€ä¸ªç©ºæ•°ç»„<code>[]</code>ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°</strong>ã€‚å°±æ˜¯è¯´ï¼Œ<strong>å½“å‰çš„<code>effect</code>ä¸ä¾èµ–äº<code>props</code>æˆ–<code>state</code>ä¸­çš„ä»»ä½•å€¼ï¼Œæ°¸è¿œåªä¼šåœ¨åˆæ¬¡æ¸²æŸ“åæ‰§è¡Œä¸€æ¬¡</strong>ã€‚</p></li></ol></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/keep-Learning/react/react-learning-and-summary/About-React-Render-And-Update.html" class="prev">
        ä¸ªäººè§è§£ä¹‹ React æ¸²æŸ“ä¸æ›´æ–°
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/keep-Learning/assets/js/app.90ccec97.js" defer></script><script src="/keep-Learning/assets/js/2.71580b53.js" defer></script><script src="/keep-Learning/assets/js/81.6eacd104.js" defer></script>
  </body>
</html>
