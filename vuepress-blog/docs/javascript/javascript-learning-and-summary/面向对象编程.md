# é¢å‘å¯¹è±¡ç¼–ç¨‹æ€æƒ³

æ—¥å¸¸å¼€å‘ä¸­ï¼Œé¢å‘å¯¹è±¡ç¼–ç¨‹æ€æƒ³å¯¹äº JavaScript æ¥è¯´æ˜¾å¾—æ—¥ç›Šé‡è¦ã€‚ä¸‹é¢å°±é’ˆå¯¹ ES5 åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹å®ç°ä¸Šè¿›è¡Œä¸€äº›æ€»ç»“ï¼ŒåŸºäºã€ŠJavaScripté«˜çº§ç¨‹åºè®¾è®¡ã€‹ã€‚

## äº†è§£å¯¹è±¡

åœ¨`JavaScript`ä¸­ï¼Œåˆ›å»ºå¯¹è±¡çš„æ–¹æ³•ä¸€èˆ¬åªç”¨ä¸¤ç§æ–¹å¼ï¼Œå¦‚ä¸‹ï¼š

- é€šè¿‡`Object`å®ä¾‹åŒ–åˆ›å»ºï¼›
- ä½¿ç”¨å¯¹è±¡å­—é¢é‡æ–¹å¼ï¼›

```javascript
// ç¬¬ä¸€ç§æ–¹å¼
var obj = new Object()
obj.name = 'Andraw'
obj.getName = function() {
  return this.name
}

// ç¬¬äºŒç§æ–¹å¼
var obj = {
  name: 'Andraw',
  getName: function() {
    return this.name
  }
}
```

## å¯¹è±¡å±æ€§

å¯¹äºå¯¹è±¡å±æ€§ï¼Œå¯ä»¥åˆ†ä¸ºä¸¤ç±»ï¼š

1. æ•°æ®å±æ€§ï¼›
2. è®¿é—®å™¨å±æ€§ï¼›

è¿™ä¸¤è€…æœ‰ä»€ä¹ˆå¼‚åŒå‘¢ï¼Ÿä¸ºäº†ç†è§£ä¸Šè¿°çš„å¼‚åŒï¼Œé¦–å…ˆå…ˆäº†è§£ä¸€ä¸‹å®šä¹‰åœ¨å±æ€§å†…éƒ¨çš„**ç‰¹æ€§(attribute)**ï¼Œç”¨äºæè¿°å±æ€§çš„å„ç§ç‰¹å¾

- **[[ Configurabale ]]**

  è¡¨ç¤ºèƒ½å¦é€šè¿‡`delete`åˆ é™¤å±æ€§ã€æˆ–èƒ½å¦ä¿®æ”¹å±æ€§çš„å†…éƒ¨ç‰¹æ€§ã€æˆ–èƒ½å¦æŠŠå±æ€§ä¿®æ”¹ä¸ºè®¿é—®å™¨å±æ€§ç­‰

- **[[ Enumerable ]]**

  è¡¨ç¤ºè¯¥å±æ€§æ˜¯å¦å¯éå†ï¼Œå³èƒ½å¦é€šè¿‡`for-in`æˆ–`Object.keys()`éå†è¿”å›å±æ€§

- **[[ Writable ]]**

  è¡¨ç¤ºèƒ½å¦ç›´æ¥ä¿®æ”¹å±æ€§çš„å€¼ï¼ˆç”¨äºæ•°æ®å±æ€§ï¼‰

- **[[ Value ]]**

  ä»£è¡¨è¯¥å±æ€§çš„å€¼ï¼ˆç”¨äºæ•°æ®å±æ€§ï¼‰

- **[[ Get ]]**

  åœ¨è¯»å–å±æ€§æ—¶è°ƒç”¨çš„å‡½æ•°ï¼ˆç”¨äºè®¿é—®å™¨å±æ€§ï¼‰

- **[[ Set ]]**

  åœ¨å†™å…¥å±æ€§æ—¶è°ƒç”¨çš„å‡½æ•°ï¼ˆç”¨äºè®¿é—®å™¨å±æ€§ï¼‰

ç®€å•æ»´è¯´ï¼Œæ•°æ®å±æ€§å’Œè®¿é—®å™¨å±æ€§çš„åŒºåˆ«å°±æ˜¯èµ‹å€¼å’Œè®¾ç½®å€¼æ–¹å¼ä¸åŒï¼Œæ•°æ®å±æ€§ä½¿ç”¨`[[ value ]]`å’Œ`[[ Writable ]]`ç‰¹æ€§ï¼Œè®¿é—®å™¨å±æ€§ä½¿ç”¨`[[ Get ]]`å’Œ`[[ Set ]]`ç‰¹æ€§ã€‚

å†…éƒ¨ç‰¹æ€§ä¸»è¦æ˜¯ç”¨äºä¸ºäº†å®ç°`JavaScriptå¼•æ“`ç”¨çš„ï¼Œåœ¨`JavaScript`ä¸­æ˜¯æ— æ³•ç›´æ¥è®¿é—®çš„ã€‚å¦‚æœæƒ³å¯¹å¯¹è±¡å±æ€§è¿›è¡Œå®šä¹‰å†…éƒ¨ç‰¹æ€§ï¼Œå°±éœ€è¦ç”¨åˆ°`ES5ä¸­Object.defineProperty()æ–¹æ³•`ï¼Œæ¥å—ä¸‰ä¸ªå‚æ•°ï¼šå±æ€§æ‰€åœ¨çš„å¯¹è±¡ã€å±æ€§åã€æè¿°ç¬¦å¯¹è±¡ï¼ˆæè¿°ç¬¦å¯¹è±¡çš„å±æ€§å¿…é¡»åŒ…æ‹¬å†…éƒ¨ç‰¹æ€§ï¼‰ï¼Œç›´æ¥ä¸Šæ —å­ï¼š

```javascript
// æ•°æ®å±æ€§
var person = {}
Object.defineProperty(person, 'name', {
  configurable: false,
  writable: false,
  value: 'Andraw'
})
person.name = 'Tom'
delete person.name
console.log(person.name)			// 'Andraw'

// è®¿é—®å™¨å±æ€§
var book = {
  _year: 2008
}
Object.defineProperty(book, 'year', {
  get() {
    return this._year
  },
  set(val) {
  	this._year = val
	}
})
book.year = 2018
console.log(book.year)			// 2018

// å®šä¹‰å¤šä¸ªå±æ€§
var book = {}
Object.defineProperties(book, {
  _year: {
    value: 2018
  },
  year: {
    get() {
      return this._year
    },
    set(val) {
      this._year = val
    }
  }
})
```

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ`Object.defineProperty()`æ–¹æ³•ä¸­è‹¥ä¸æŒ‡å®šç‰¹æ€§å€¼ï¼Œconfigurableã€enumerableã€writableé»˜è®¤éƒ½æ˜¯ä¸ºfalseã€‚è€Œç›´æ¥åœ¨å¯¹è±¡å®šä¹‰çš„å±æ€§ï¼Œconfigurableã€enumerableã€writableé»˜è®¤éƒ½æ˜¯ä¸ºtrueã€‚

å¦å¤–ï¼Œé€šè¿‡`Object.getOwnPropertyDescriptor()æ–¹æ³•`å¯ä»¥è·å¾—ç»™å®šå±æ€§çš„æè¿°ç¬¦ï¼Œç›´æ¥ä¸Šæ —å­ï¼š

```javascript
var person = {}
Object.defineProperty(person, 'name', {
  configurable: false,
  writable: false,
  value: 'Andraw'
})
var descriptor = Object.getOwnPropertyDescriptor(person, 'name')
console.log(descriptor.writable)			// false
```

## å¯¹è±¡çš„åˆ›å»º

ç”±äºä¸Šé¢è¯´è¿‡ï¼Œä¸€èˆ¬ä½¿ç”¨`Objectå¯¹è±¡`å®ä¾‹åŒ–å’Œå¯¹è±¡å­—é¢é‡çš„ä¸¤ç§æ–¹å¼æ¥å¿«æ·åˆ›å»ºå•ä¸ªå¯¹è±¡ã€‚ä½†æ˜¯ï¼Œè¦æƒ³åˆ›å»ºå¤šä¸ªå˜é‡ï¼Œè¿™ä¸¤ç§æ–¹å¼å°±ä¼šå‡ºç°å¾ˆå¤šé‡å¤ä»£ç ã€‚ä¸ºæ­¤ï¼Œå¯é€šè¿‡ä¸‹é¢çš„æ–¹å¼æ¥å°è£…åˆ›å»ºå¯¹è±¡çš„æ–¹å¼ï¼š

ä¸€ã€Factory Modeï¼ˆå·¥å‚æ¨¡å¼ï¼‰

å·¥å‚æ¨¡å¼å®ç°çš„æ–¹å¼å¾ˆç®€å•ï¼Œå°±æ˜¯åœ¨å‡½æ•°ä¸­é€šè¿‡åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œç„¶åå†åœ¨è¿™ä¸ªå¯¹è±¡ä¸Šå®šä¹‰å±æ€§æˆ–æ–¹æ³•ã€‚ç›´æ¥çœ‹æ —å­ï¼š

```javascript
// Factory Mode
function createPerson(name, age) {
  var obj = new Object()
  obj.name = name
  obj.age = age
  obj.getName = function() {
    return this.name
  }
  return obj
}
var person = createPerson('Andraw', 20)
console.log(person.getName())			// "Andraw"
```

å·¥å‚æ¨¡å¼ä¼˜ç‚¹å°±æ˜¯å¯ä»¥é‡äº§å¤šä¸ªå¯¹è±¡ï¼Œä½†ç¼ºç‚¹å°±æ˜¯æ— æ³•è¯†åˆ«å¯¹è±¡çš„é—®é¢˜ï¼ˆå³æ— æ³•çŸ¥é“ä¸€ä¸ªå¯¹è±¡çš„ç±»å‹ï¼‰ã€‚å¦‚ä½•ç†è§£è¿™å¥è¯ï¼Ÿçœ‹æ —å­ï¼š

```javascript
// æ¥ç€ä¸Šé¢çš„æ —å­ï¼Œé€šè¿‡å®ä¾‹çš„constructorå±æ€§å¯åˆ¤æ–­å¯¹è±¡ç±»å‹
console.log(person.constructor === Object)			// true
console.log(person.constructor === createPerson)			// false
```

äºŒã€Constructor Modeï¼ˆæ„é€ å‡½æ•°æ¨¡å¼ï¼‰

æ„é€ å‡½æ•°æ¨¡å¼å°±æ˜¯è§£å†³äº†å¯¹è±¡ç±»å‹çš„è¯†åˆ«é—®é¢˜ï¼Œå®šä¹‰æ„é€ å‡½æ•°æ—¶ä¸ºäº†åŒºåˆ«æ™®é€šå‡½æ•°ï¼Œè§„èŒƒæ˜¯é¦–å­—æ¯ä¸ºå¤§å†™ã€‚ç›´æ¥çœ‹æ —å­ï¼š

```javascript
// Constructor Mode
function Person(name, age) {
  this.name = name
  this.age = age
  this.getName = function() {
    return this.name
  }
}
var person = new Person('Andraw', 20)
console.log(person.getName)			// "Andraw"
```

ä½¿ç”¨æ„é€ å‡½æ•°æ¨¡å¼åˆ›å»ºå¯¹è±¡ï¼Œå¿…é¡»ä½¿ç”¨`newæ“ä½œç¬¦`ï¼Œä½¿ç”¨è¿™ç§æ–¹å¼åˆ›å»ºå¯¹è±¡å®é™…ä¼šç»å†ä»¥ä¸‹å››ä¸ªæ­¥éª¤ï¼š

- åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼›
- å°†æ„é€ å‡½æ•°çš„ä½œç”¨åŸŸèµ‹ç»™æ–°å¯¹è±¡ï¼ˆå³thiså°±æŒ‡å‘è¿™ä¸ªæ–°å¯¹è±¡ï¼‰ï¼›
- æ‰§è¡Œæ„é€ å‡½æ•°ä¸­çš„ä»£ç ï¼ˆå³å®šä¹‰å±æ€§æˆ–æ–¹æ³•ï¼‰ï¼›
- æœ€åè¿”å›è¿™ä¸ªæ–°å¯¹è±¡ï¼›

ä¸ºäº†æ£€æµ‹å¯¹è±¡ç±»å‹ï¼Œé™¤äº†ä¸Šé¢æåˆ°çš„`constructorå±æ€§`ï¼Œè¿˜å¯ä»¥ä½¿ç”¨`instanceofæ“ä½œç¬¦`ï¼Œè€Œä¸”å®˜æ–¹æåˆ°ä½¿ç”¨`instanceof`æ›´å¯é ä¸€äº›å“ˆå“ˆğŸ˜„

```javascript
// constructorï¼ˆå¯ä»¥å•ä¸€åœ°ç”¨æ¥æ ‡è®°æŸä¸ªå¯¹è±¡ç±»å‹ï¼Œå³ç”±å“ªä¸ªæ„é€ å‡½æ•°newå‡ºæ¥ï¼‰
console.log(person.constructor === Object)			// false
console.log(person.constructor === Perosn)			// true

// instanceof
console.log(person instanceof Object)			// true
console.log(person instanceof Person)			// true
```

ä¸ºä»€ä¹ˆå½“æŠŠå¯¹è±¡ç±»å‹ä¸`Object`æ¯”è¾ƒä½¿ç”¨`instanceof`æ—¶æ€»ä¼šè¿”å›trueï¼Ÿåˆ«å¿˜äº†ï¼Œæ‰€æœ‰å¯¹è±¡çš„é¡¶å±‚éƒ½æ˜¯`Object`ï¼ˆå³æ‰€æœ‰å¯¹è±¡éƒ½æ˜¯Objectçš„å®ä¾‹ï¼‰ï¼Œç®€å•æ»´è¯´ï¼Œå°±æ˜¯æ‰€æœ‰å¯¹è±¡éƒ½æ˜¯é€šè¿‡`Object`ç»§æ‰¿è€Œæ¥ã€‚å½“ç„¶ï¼Œå¯¹äºæ„é€ å‡½æ•°ï¼Œæœ‰ä¸€äº›ç–‘é—®ä¹Ÿä¼šéšä¹‹è€Œæ¥ï¼š

1. æ˜¯å¦å¯ä»¥å°†æ„é€ å‡½æ•°å½“ä½œæ™®é€šå‡½æ•°ï¼Ÿ

   æ€»æ‰€å‘¨çŸ¥ï¼Œå½“æ„é€ å‡½æ•°ä¸é€šè¿‡`newæ“ä½œç¬¦`æ¥åˆ›å»ºå¯¹è±¡æ—¶ï¼Œå®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªæ™®é€šå‡½æ•°çš„è°ƒç”¨ï¼Œç„¶è€Œï¼Œ`this`æŒ‡å‘ä¹Ÿä¼šæ”¹å˜ï¼š

   - æ™®é€šå‡½æ•°åˆ›å»ºï¼š`this`æŒ‡å‘`windowå¯¹è±¡`ï¼›
   - æ„é€ å‡½æ•°åˆ›å»ºï¼š`this`æŒ‡å‘`æ‰€åˆ›å»ºçš„æ–°å¯¹è±¡`ï¼›
   - ä½¿ç”¨`call`æˆ–`apply`è°ƒç”¨ï¼š`this`æŒ‡å‘è¯¥æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¼ å…¥çš„å¯¹è±¡ï¼ˆå®é™…åœ¨è¿™ä¸ªä¼ å…¥å¯¹è±¡çš„ä½œç”¨åŸŸè°ƒç”¨ç›¸å¯¹åº”çš„æ–¹æ³•ï¼‰

   ```javascript
   // æ„é€ å‡½æ•°å½“æ™®é€šå‡½æ•°è°ƒç”¨
   Person('Andarw', 20)
   // ç”±äºthisæŒ‡å‘çš„æ˜¯windowå¯¹è±¡ï¼Œå› æ­¤æ‰€å®šä¹‰çš„å±æ€§å’Œæ–¹æ³•å®é™…ä¸Šå°±æ˜¯å…¨å±€å±æ€§æˆ–å…¨å±€æ–¹æ³•
   console.log(window.getName())			// "Andraw"
   
   // ä½¿ç”¨callæˆ–applyè°ƒç”¨ï¼ˆç›¸å½“äºåœ¨ä¸€ä¸ªæ–°å¯¹è±¡çš„ä½œç”¨åŸŸä¸­è°ƒç”¨ï¼‰
   var obj = new Object()
   Person.call(obj, 'Andraw', 20)
   console.log(obj.getName())			// "Andraw"
   ```

2. æ„é€ å‡½æ•°çš„ç¼ºé™·

   æ„é€ å‡½æ•°è™½ç„¶å¥½ç”¨ï¼Œä½†æ˜¯åœ¨ä¸€äº›å¤šä¸ªå¯¹è±¡å…±ç”¨æ–¹æ³•å®šä¹‰æ—¶ï¼Œå°±ä¸å¯é¿å…åœ°åˆ›å»ºå¤šä¸ªå…±ç”¨æ–¹æ³•ï¼Œè€Œæˆ‘ä»¬çš„ç›®çš„å°±æ˜¯æƒ³å¯¹äºå…±ç”¨çš„æ–¹æ³•åªéœ€å®šä¹‰ä¸€æ¬¡å³å¯ï¼Œå¯ä¼˜åŒ–å†…å­˜ï¼Œçœ‹æ —å­å³å¯æ˜ç™½ï¼š

   ```javascript
   function Perosn(name, age) {
     this.name = name
     this.age = age
     this.getName = new Function('return this.name')
   }
   var person = new Person('Andraw', 20)
   console.log(person.getName())			// "Andraw"
   ```

   å¯ä»¥çœ‹åˆ°ï¼Œæ¯æ¬¡`new`å®ä¾‹åŒ–åˆ›å»ºå¯¹è±¡åï¼Œéƒ½ä¼šæ— å¯é¿å…åœ°`new Funtion`æ¥åˆ›å»º`getName`æ–¹æ³•ï¼Œè¿™å¯¹äºåˆ›å»ºè‡ªå®šä¹‰è¯¥å¯¹è±¡å•ç‹¬ä½¿ç”¨çš„æ–¹æ³•æ˜¯æ²¡é—®é¢˜ï¼Œä½†æ˜¯å¯¹äºå…±ç”¨çš„æ–¹æ³•å°±ä¼šæµªè´¹å†…å­˜ã€‚å½“ç„¶ä¹Ÿæœ‰æ–¹æ³•å¯ä»¥è§£å†³ï¼Œå°±æ˜¯æŠŠæ–¹æ³•é€šè¿‡å¤–éƒ¨å®šä¹‰ï¼š

   ```javascript
   function Perosn(name, age) {
     this.name = name
     this.age = age
     this.getName = getName
   }
   function getName() {
     return this.name
   }
   ```

   è¿™ç§å†™æ³•è™½ç„¶å¯ä»¥è§£å†³æ„é€ å‡½æ•°çš„å…±ç”¨æ–¹æ³•çš„å®šä¹‰é—®é¢˜ï¼ˆå³`Person`çš„æ‰€æœ‰å®ä¾‹éƒ½ä¼šå…±äº«å…¨å±€ä½œç”¨åŸŸä¸‹å®šä¹‰çš„åŒä¸€ä¸ª`getNmae`å‡½æ•°ï¼‰ã€‚

   åŒæ ·åœ°ï¼Œä¸Šè¿°ä¹Ÿä¼šå¯¼è‡´ä¸€ä¸ªæ–°çš„é—®é¢˜ï¼Œå°±æ˜¯å…¨å±€ä½œç”¨åŸŸä¸‹çš„å®šä¹‰çš„å‡½æ•°åªèƒ½è¢«æŸä¸ªå¯¹è±¡è°ƒç”¨æ— æ³•ä½“ç°å…¨å±€çš„å¹¿åŸŸå«ä¹‰ã€‚å½“å¯¹è±¡éœ€å®šä¹‰å¤šä¸ªæ–¹æ³•æ—¶ä¹Ÿä¸å¯é¿å…åœ°ä¼šåœ¨å®šä¹‰å¤šä¸ªå…¨å±€æ–¹æ³•ï¼ŒåŒæ—¶å®¹æ˜“å¯¼è‡´å…¨å±€æ±¡æŸ“ï¼Œä¹Ÿå°±ä¸èƒ½ä½“ç°å¯¹è±¡çš„å°è£…æ€§ã€‚

ä¸‰ã€Prototype Modeï¼ˆåŸå‹æ¨¡å¼ï¼‰

é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¯ä¸ªå‡½æ•°éƒ½ä¼šæœ‰ä¸€ä¸ª`Prototype`å±æ€§ï¼ˆæ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼‰ï¼ŒæŒ‡å‘**ä¸€ä¸ªç”±ç‰¹å®šç±»å‹ï¼ˆæ„é€ å‡½æ•°ï¼‰ä¸‹æ‰€æœ‰å®ä¾‹å…±äº«çš„å±æ€§å’Œæ–¹æ³•çš„å¯¹è±¡**ã€‚ç®€å•æ»´è¯´ï¼Œå°±æ˜¯`new`å‡ºçš„å®ä¾‹çš„åŸå‹å¯¹è±¡ã€‚

åŸå‹å¯¹è±¡çš„å¥½å¤„ï¼Œå¯ä»¥è®©æ‰€æœ‰å®ä¾‹å…±äº«å®ƒçš„å±æ€§å’Œæ–¹æ³•ï¼ˆå°è£…æ€§ï¼‰ã€‚å› æ­¤ï¼ŒåŸå‹æ¨¡å¼ä¹Ÿå°±è§£å†³äº†æ„é€ å‡½æ•°æ¨¡å¼çš„ç¼ºé™·ï¼Œç›´æ¥ä¸Šæ —å­ğŸŒ°ï¼š

```javascript
function Person() {}
Person.prototype.name = 'Andraw'
Person.prototype.getName = function() { return this.name }
var person1 = new Person(),
    person2 = new Person()
console.log(person1.getName === person2.getName)		// true
```

1. ç†è§£åŸå‹å¯¹è±¡

   - å½“åˆ›å»ºä¸€ä¸ªæ–°å‡½æ•°ï¼Œjså°±ä¼šæ ¹æ®ä¸€ç»„ç‰¹å®šçš„è§„åˆ™ä¸ºè¯¥å‡½æ•°åˆ›å»ºä¸€ä¸ª`Prototype`å±æ€§ï¼ŒæŒ‡å‘å‡½æ•°çš„åŸå‹å¯¹è±¡ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰åŸå‹å¯¹è±¡éƒ½ä¼šè‡ªåŠ¨è·å¾—ä¸€ä¸ª`constructor(æ„é€ å‡½æ•°)`å±æ€§ï¼ŒæŒ‡å‘åŸå‡½æ•°ã€‚çœ‹æ —å­ğŸŒ°ï¼š

     ```javascript
     function Person() {}
     console.log(Person.prototype.constructor === Person)		// true
     ```

   - å¦å¤–ï¼Œæ‰€æœ‰å¯¹è±¡å®ä¾‹ä¹ŸåŒ…å«ä¸€ä¸ªå†…éƒ¨æŒ‡é’ˆï¼ˆES5ä¸Šå«`[[Prototype]]`ï¼‰ï¼ŒæŒ‡å‘æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡ã€‚åœ¨FireFoxã€Safariå’ŒChromeä¸Šæ˜¯æ”¯æŒé€šè¿‡è®¿é—®å®ä¾‹çš„`__Proto__`å±æ€§ï¼Œæ¥è®¿é—®åˆ°åŸå‹å¯¹è±¡ã€‚

     + é€šè¿‡`isPrototypeOf()`æ–¹æ³•å¯ç¡®å®šå¯¹è±¡æ˜¯å¦ä¸ºå®ä¾‹çš„åŸå‹å¯¹è±¡ã€‚

     + é€šè¿‡`Object.getPrototypeOf()`æ–¹æ³•å¯è¿”å›`[[Prototype]]`çš„å€¼ã€‚

     + é€šè¿‡`hasOwnProperty()`æ–¹æ³•ï¼Œå¯ç¡®å®šè¯¥å®ä¾‹æ˜¯å¦å­˜åœ¨è¯¥å±æ€§ï¼Œè‹¥å­˜åœ¨åŸå‹å¯¹è±¡ä¸Šå°±ä¼šè¿”å›false

       çœ‹æ —å­ğŸŒ°ï¼š

     ```javascript
     // isPrototype()
     console.log(Person.prototype.isPrototypeOf(Person1))		// true
     
     // getPrototypeOf()
     console.log(Object.getPrototypeOf(person1) === Person.prototype)		// true
     
     // hasOwnProperty()
     console.log(person1.hasOwnProperty('name'))		// false
     ```

     ![](http://learning-every-day.oss-cn-shenzhen.aliyuncs.com/javascript%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E8%AE%BE%E8%AE%A1/Prototype-Mode.png)

   - å½“è®¿é—®ä¸€ä¸ªå¯¹è±¡çš„å±æ€§æ—¶ï¼Œä¼šå…ˆçœ‹è¯¥å¯¹è±¡ä¸‹æ˜¯å¦å­˜åœ¨è¯¥å±æ€§ï¼Œè‹¥ä¸å­˜åœ¨ï¼Œå°±ä¼šæ ¹æ®åŸå‹é“¾ï¼ˆå³`[[Prototype]]`ï¼‰è®¿é—®åŸå‹å¯¹è±¡æ˜¯å¦å­˜åœ¨è¯¥å±æ€§ï¼Œè‹¥è¿˜æ˜¯ä¸å­˜åœ¨æ—¶ï¼Œå°±ä¼šè¿”å›`undefined`ã€‚æ‰€ä»¥è®¿é—®ä¸€ä¸ªå¯¹è±¡å±æ€§ï¼Œæœ€å¤šä¼šè¿›è¡Œæœç´¢ä¸¤æ¬¡ã€‚

     éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå½“å¯¹è±¡ä¸Šå®šä¹‰çš„å±æ€§è¦†ç›–äº†åŸå‹å¯¹è±¡ä¸Šçš„å±æ€§æ—¶ï¼ˆå³é‡å†™ï¼‰ï¼Œè®¿é—®è¯¥å¯¹è±¡å±æ€§å°±ä¼šç›´æ¥å±è”½æ‰åŸå‹å¯¹è±¡ä¸ŠåŒåå±æ€§çš„å€¼ï¼Œåªæœ‰é€šè¿‡`delete`æ“ä½œæ‰å¯ä»¥å¤åŸã€‚

     çœ‹æ —å­ğŸŒ°ï¼š

     ```javascript
     function Person() {}
     Person.prototype.name = 'Andraw'
     var person1 = new Person()
     person1.name = 'Tom'
     console.log(person1.name)		// 'Tom'
     delete person1.name
     console.log(person1.name)		// 'Andraw'
     ```

2. åŸå‹ä¸ in æ“ä½œç¬¦

   `in`æ“ä½œç¬¦çš„ä½¿ç”¨æ–¹å¼æœ‰ä¸¤ç§ï¼šå•ç‹¬ä½¿ç”¨å’Œåœ¨`for-in`å¾ªç¯ä¸­ä½¿ç”¨ã€‚å•ç‹¬ä½¿ç”¨æ—¶ï¼Œå½“å±æ€§åœ¨å¯¹è±¡ä¸­å¯è®¿é—®æ—¶å°±è¿”å›`true`ï¼Œ**æ— è®ºå±æ€§æ˜¯åœ¨å¯¹è±¡ä¸­è¿˜æ˜¯åœ¨å…¶åŸå‹å¯¹è±¡ä¸Š**ã€‚

   çœ‹æ —å­ğŸŒ°ï¼š

   ```javascript
   function Person() {}
   Person.prototype.name = 'Andraw'
   var person1 = new Person()
   console.log('name' in Person1)		// true
   Person1.name = 'Tom'
   console.log('name' in Person1)		// true
   ```

   å¦å¤–ï¼Œå•ç‹¬ä½¿ç”¨`in`æ“ä½œç¬¦ä¸`hasOwnProperty()`æ–¹æ³•ç»“åˆæ—¶ï¼Œå¯ä»¥ç›´æ¥åˆ¤æ–­è¯¥å±æ€§æ˜¯å¦åœ¨åŸå‹å¯¹è±¡ä¸Šï¼š

   ```javascript
   function hasPrototypeProperty(obj, name) {
     return !(obj.hasOwnProperty(name)) && (name in obj)
   }
   ```

   å¯¹è±¡éå†è¿”å›`Key`æ–¹å¼æœ‰ï¼š

   - For-inå¾ªç¯

     éå†å¯¹è±¡æ—¶ï¼Œè¿”å›çš„æ˜¯å¯¹è±¡æ‰€æœ‰å¯è®¿é—®ã€å¯æšä¸¾å±æ€§ï¼Œæ³¨æ„çš„æ˜¯ï¼Œ**éå†æ—¶ä¼šæ²¿ç€åŸå‹é“¾å‘ä¸Šéå†**ã€‚çœ‹æ —å­ğŸŒ°ï¼š

     ```javascript
     function Person() {}
     Person.prototype.name = 'Andraw'
     var person1 = new Person()
     person1.age = 12
     // for-inå¾ªç¯
     for(var key in person1) { console.log(key) }		
     // 'age'
     // 'name'
     ```

   - `Object.keys()`æ–¹æ³•ï¼ˆIE9+ï¼‰

     åªè¿”å›è¯¥å¯¹è±¡èƒ½è®¿é—®çš„**å¯æšä¸¾**å±æ€§ï¼Œä¸åŒ…æ‹¬åŸå‹å¯¹è±¡ã€‚

     ```javascript
     var person2 = new Person()
     console.log(Object.keys(person2))		// age
     ```

   - `Object.getOwnPropertyNames()`æ–¹æ³•ï¼ˆIE9+ï¼‰

     è¿”å›è¯¥å¯¹è±¡è®¿é—®çš„**å¯æšä¸¾å’Œä¸å¯æšä¸¾**å±æ€§ã€‚

     ```javascript
     console.log(Object.getOwnPropertyNames(Person.prototype))
     // constructor
     // name
     ```

3. åŸå‹å¯¹è±¡çš„è¯­æ³•ç³–

   ç”±äºä¸Šè¿°æ¯æ¬¡èµ‹å€¼åˆ°åŸå‹å¯¹è±¡æ—¶ï¼Œéƒ½ä¼šé‡å¤ç¼–å†™`Person.prototype`ï¼Œå¾ˆæ˜¾ç„¶æ˜¯å¾ˆéº»çƒ¦çš„ã€‚ä¸ºæ­¤ï¼Œå¯ä»¥ç›´æ¥ç»™åŸå‹å¯¹è±¡ç›´æ¥èµ‹å€¼ä¸€ä¸ªå¯¹è±¡ï¼Œå¦‚ä¸‹ï¼š

   ```javascript
   function Person() {}
   Person.prototype = {
     name: 'Andraw'
   }
   ```

   çœ‹ä¼¼ç®€å•äº†ï¼Œå´åŒ…å«ç€å¾ˆå¤šé—®é¢˜ï¼Œæœ€é‡è¦çš„å°±**æ˜¯`constructor`æŒ‡å‘æ”¹å˜äº†ï¼Œä¸å†æŒ‡å‘`Person`ï¼Œè€Œæ˜¯æŒ‡å‘äº†`Object`ï¼Œç›¸å½“äºå°†åŸå‹å¯¹è±¡ç›´æ¥`new Object()`**ã€‚

   å¦å¤–ï¼Œ**å¯¹è±¡æ˜¯ä¸ä¼šå­˜åœ¨`constructor`å±æ€§çš„ï¼Œéƒ½æ˜¯ç›´æ¥è®¿é—®å…¶åŸå‹å¯¹è±¡çš„**ã€‚

   `instanceof`æ“ä½œç¬¦ï¼Œç®€å•æ»´è¯´å…¶å®å°±æ˜¯å¯¹è±¡çš„åŸå‹æ˜¯å¦å­˜åœ¨äºå·¦è¾¹å®ä¾‹çš„åŸå‹é“¾ä¸Šã€‚

   çœ‹æ —å­ğŸŒ°ï¼š

   ```javascript
   var person = new Person()
   console.log(person instanceof Object, person.__proto__ === Person.prototype)		// true, true
   console.log(person.constructor === Object, person.constructor === Person)		// true, true
   ```

   å½“ç„¶ï¼Œå¯ä»¥ç›´æ¥èµ‹å€¼å¯¹è±¡å­—é¢é‡æ—¶ï¼Œå¯å¼ºåˆ¶èµ‹å€¼`constructor`æŒ‡å‘å›`Person`ï¼Œä½†è¿™æ ·å°±ä¼šå¯¼è‡´é‡å†™`constructor`å±æ€§çš„`[[Enumerable]]`å¯æšä¸¾å±æ€§ä¸ºtrueï¼Œå› ä¸ºé»˜è®¤æƒ…å†µä¸‹å®ƒæ˜¯ä¸ºfalseçš„ã€‚ä¸ºæ­¤ï¼Œå¯ç›´æ¥ä½¿ç”¨`Object.defineProperty()`æ–¹æ³•æ¥è§£å†³ï¼š

   ```javascript
   Object.defineProperty(Person.prototype, 'constructor', {
     enumerable: false,
     value: Person
   })
   ```

4. åŸå‹çš„åŠ¨æ€æ€§

   å½“åœ¨åˆ›å»ºå®ä¾‹åï¼Œæ‰å»é‡å†™åŸå‹å¯¹è±¡ï¼ˆå³ä½¿ç”¨åŸå‹å¯¹è±¡çš„è¯­æ³•ç³–ï¼‰ï¼Œæ— ç–‘ä¼šåˆ‡æ–­åŸå‹å¯¹è±¡ä¸å®ä¾‹é—´çš„å…³ç³»ï¼Œä½†éœ€è¦æ³¨æ„çš„æ˜¯åŸæ¥çš„åŸå‹å¯¹è±¡ä¾æ—§å­˜åœ¨çš„ã€‚

   ```javascript
   function Person() {}
   var person = new Person()
   person.prototype = {
     constructor: Person,
     name: 'Andraw'
   }
   console.log(person.name)		// undefined
   ```

   åœ¨åˆ›å»ºå®ä¾‹æ—¶ï¼Œæ‰ä¼šé»˜è®¤æŒ‡å®šå®ä¾‹çš„`[[Prototype]]`å±æ€§ã€‚

5. åŸå‹æ¨¡å¼é—®é¢˜

   åŸå‹æ¨¡å¼æœ€å¤§çš„é—®é¢˜å°±æ˜¯å¼•ç”¨ç±»å‹çš„å…±äº«é—®é¢˜ã€‚å½“ä¸€ä¸ªå®ä¾‹æ”¹å˜äº†åŸå‹å¯¹è±¡çš„å¼•ç”¨ç±»å‹å±æ€§æ—¶ï¼Œä¹Ÿä¼šå¯¼è‡´å…¶ä»–å®ä¾‹è®¿é—®è¿™ä¸ªå±æ€§æ—¶æ”¹å˜ï¼ˆå› ä¸ºå¼•ç”¨ç±»å‹æŒ‡å‘åŒä¸€ä¸ªæŒ‡é’ˆï¼‰ã€‚

   çœ‹æ —å­ğŸŒ°ï¼š

   ```javascript
   function Person() {}
   Person.prototype = {
     constructor: Person,
     name: ['Andraw']
   }
   var Person1 = new Person(),
       person2 = new Person()
   person1.name.push('Tom')
   console.log(person1.name)		// ['Andraw', 'Tom']
   console.log(person2.name)		// ['Andraw', 'Tom']
   ```

å››ã€Constructor Mode And Prototype Modeï¼ˆç»„åˆä½¿ç”¨æ„é€ å‡½æ•°æ¨¡å¼å’ŒåŸå‹æ¨¡å¼ï¼‰

åˆ›å»ºå¯¹è±¡æœ€å¥½çš„æ–¹å¼ï¼Œå°±æ˜¯ç»„åˆä½¿ç”¨æ„é€ å‡½æ•°æ¨¡å¼å’ŒåŸå‹æ¨¡å¼ã€‚æ„é€ å‡½æ•°æ¨¡å¼ç”¨äºå®šä¹‰å®ä¾‹ç‹¬è‡ªéœ€è¦å±æ€§æˆ–æ–¹æ³•ï¼Œè€ŒåŸå‹æ¨¡å¼åˆ™æ˜¯å®šä¹‰æ‰€ç”¨å®ä¾‹æ‰€å…±äº«çš„å±æ€§æˆ–æ–¹æ³•ã€‚

çœ‹æ —å­ğŸŒ°ï¼š

```javascript
function Person(name) {
  this.name = name
  this.friends = []
}
Person.prototype = {
  constructor: Person,
  sayName: function() { return this.name }
}
var person1 = new Person('Andraw'),
    person2 = new Person('Tom')
person1.friends.push('haha')
console.log(person1.friends)		// ['haha']
console.log(person2.friends)		// []
console.log(person1.sayName === person2.sayName)		// true
```

äº”ã€Dynamic Prototype Modeï¼ˆåŠ¨æ€åŸå‹æ¨¡å¼ï¼‰

åŠ¨æ€åŸå‹æ¨¡å¼ï¼Œæ˜¯ä¸€ç§å°è£…æ„é€ å‡½æ•°å’ŒåŸå‹çš„æ–¹æ¡ˆã€‚åªéœ€åˆ¤æ–­æŸä¸ªåŸå‹ä¸å­˜åœ¨æ—¶å†å»åˆå§‹åŒ–åŸå‹ï¼Œä½“ç°å…¶å°è£…æ€§ï¼Œç›´æ¥çœ‹æ —å­ğŸŒ°ï¼š

```javascript
function Person(name) {
  this.name = name
  // åˆ¤æ–­åŸå‹ä¸­çš„getNameæ–¹æ³•æ˜¯å¦å­˜åœ¨ï¼Œå­˜åœ¨æ—¶å°±ä¸å†åˆå§‹åŒ–
  if (this.getName) {
    Person.prototype.getName = function() {
      return this.name
    }
    Person.prototype.setName = function(name) {
      this.name = name
    }
  }
}
```

å¥½æ˜æ˜¾ï¼Œ`if`åˆ¤æ–­ä¸­çš„ä»£ç åªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œå› ä¸ºå½“åŸå‹ä¸å­˜åœ¨æŸä¸ªå±æ€§æˆ–æ–¹æ³•æ—¶ï¼Œå°±è¿›è¡Œäº†åˆå§‹åŒ–ï¼Œåç»­ä¸å†éœ€è¦åˆå§‹åŒ–äº†ã€‚éœ€æ³¨æ„çš„æ˜¯ï¼Œåœ¨åˆå§‹åŒ–è¿‡ç¨‹ä¸­ï¼Œä¸èƒ½ç›´æ¥ç»™åŸå‹å¯¹è±¡èµ‹å€¼ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œè¿™æ ·å°±ä¼šåˆ‡æ–­å®ä¾‹ä¸åŸå‹é—´çš„å…³ç³»ã€‚


## å¯¹è±¡çš„ç»§æ‰¿

ç»§æ‰¿å¯ä»¥åˆ†ä¸ºä¸¤ç§ï¼šæ¥å£ç»§æ‰¿ï¼ˆåªç»§æ‰¿æ–¹æ³•ç­¾åï¼‰å’Œå®ç°ç»§æ‰¿ï¼ˆç»§æ‰¿å®é™…çš„æ–¹æ³•ï¼‰ã€‚ç›®å‰`ECMAScirpt5`ç”±äºå‡½æ•°æ²¡æœ‰ç­¾åï¼Œåªæ”¯æŒå®ç°ç»§æ‰¿ã€‚`javascript`çš„å®ç°ç»§æ‰¿ä¾é çš„æ˜¯**åŸå‹é“¾**ã€‚

ä¸€ã€åŸå‹é“¾

åœ¨ä¸Šé¢è®¨è®ºçš„åŸå‹æ¨¡å¼ä¸­ï¼ŒåŸå‹é“¾å…¶å®å¯ä»¥å¾ˆå®¹æ˜“çœ‹åˆ°ã€‚å½“ä¸€ä¸ªç±»å‹çš„å®ä¾‹åˆ›å»ºæ—¶ï¼ŒåŸå‹é“¾ä¹Ÿå°±å¼€å§‹åˆ›å»ºï¼Œå®ä¾‹çš„å†…éƒ¨æŒ‡é’ˆ`[[Prototype]]`æŒ‡å‘åŸå‹å¯¹è±¡ï¼Œè€ŒåŸå‹å¯¹è±¡çš„å†…éƒ¨æŒ‡é’ˆ`[[Prototype]]`åˆ™æŒ‡å‘Objectçš„åŸå‹ï¼ˆå³å¯¹è±¡çš„é¡¶éƒ¨ï¼‰ã€‚

é‚£åŸå‹é“¾æ˜¯å¦‚ä½•åœ¨å®ç°ç»§æ‰¿ä¸­å…¶ä½œç”¨çš„ï¼Ÿå¾ˆç®€å•ï¼Œå°±æ˜¯**å°†ä¸€ä¸ªç±»å‹çš„åŸå‹ç›´æ¥èµ‹å€¼ä¸ºå¦å¤–ä¸€ä¸ªç±»å‹çš„å®ä¾‹å³å¯**ã€‚

çœ‹æ —å­ğŸŒ°ï¼š

```javascript
function Parent() {
  this.name = 'Parent'
}
function Child() {}
// Childç»§æ‰¿Parent
Child.prototype = new Parent()
var person = new Child()
console.log(Child.prototype.name)		// Parent
console.log(person.name)		// Parent
```

éœ€æ³¨æ„çš„æ˜¯ï¼Œ`Child`çš„é»˜è®¤åŸå‹å¯¹è±¡å…¶å®ä¾æ—§å­˜åœ¨çš„ï¼Œåªæ˜¯å¼ºåˆ¶å°†`Child.prototype`é‡å†™äº†`Parent`çš„å®ä¾‹ï¼Œè¿›è€Œ`Child.prototype`ä¸­å°±å­˜åœ¨äº†ä¸€ä¸ªå†…éƒ¨æŒ‡é’ˆæŒ‡å‘`Parent.prototype`ã€‚

1. ç¡®å®šåŸå‹å’Œå®ä¾‹çš„å…³ç³»

   ç¡®å®šåŸå‹å’Œå®ä¾‹é—´çš„å…³ç³»æœ‰ä¸¤ç§ï¼Œåˆ†åˆ«æ˜¯ï¼š`instanceof`æ“ä½œç¬¦å’Œ`isPrototypeOf()`æ–¹æ³•ï¼Œç›´æ¥æ‹¿ä¸Šè¿°çš„æ —å­ï¼š

   ```javascript
   // instanceof
   console.log(person instanceof Child)		// true
   console.log(person instanceof Parent)		// true
   console.log(person instanceof Object)		// true
   
   // isPrototypeOf()
   console.log(Child.isPrototypeOf(person))		// true
   console.log(Parent.isPrototypeOf(person))		// true
   console.log(Object.isPrototypeOf(person))		// true
   ```

2. è°¨æ…å®šä¹‰æ–¹æ³•

   å½“å­ç±»å‹é‡å†™æˆ–æ·»åŠ è¶…ç±»å‹çš„æ–¹æ³•æ—¶ï¼Œ**éœ€åœ¨åŸå‹æ›¿æ¢è¯­å¥ä¹‹åç¼–å†™**ï¼Œä¸ç„¶é‡å†™æˆ–æ–°å¢çš„æ–¹æ³•ä¼šå­˜åœ¨äºåŸæ¥çš„åŸå‹å¯¹è±¡ä¸­ï¼Œç›´æ¥çœ‹æ —å­ğŸŒ°ï¼š

   ```javascript
   function Parent() {
     this.name = 'Parent'
   }
   function Child() {}
   Child.prototype = new Parent()
   Child.prototype.getName = function() {
     return this.name
   }
   Child.prototype.setName = function(name) {
    	this.name = name
   }
   var person1 = new Child(),
       person2 = new Child()
   person1.setName('person1')
   console.log(person1.getName())		// person1
   console.log(person2.getName())		// Parent
   
   ```

   éœ€æ³¨æ„çš„æ˜¯ï¼Œåœ¨ç»™`Child`åŸå‹åˆå§‹åŒ–æ—¶ï¼Œä¸èƒ½ç”¨å¯¹è±¡å­—é¢é‡ï¼Œè¿™æ ·ä¼šå¯¼è‡´`Child`ä¸å†ç»§æ‰¿`Parent`ï¼Œè€Œæ˜¯ç›´æ¥ç»§æ‰¿äº†`Object`å¯¹è±¡ã€‚

3. åŸå‹é“¾çš„é—®é¢˜

   - å¼•ç”¨ç±»å‹å…±äº«é—®é¢˜

     å½“å­ç±»å‹ä¸­çš„æŸä¸ªæ–¹æ³•å¯¹çˆ¶ç±»å‹ä¸­çš„æŸä¸ªå¼•ç”¨ç±»å‹å±æ€§æ”¹å˜æ—¶ï¼Œä¼šä½¿æ‰€æœ‰å®ä¾‹å¼•ç”¨çš„è¿™ä¸ªå±æ€§éƒ½ä¼šå…±åŒæ”¹å˜ï¼Œç›´æ¥çœ‹æ —å­ğŸŒ°ï¼š

     ```javascript
     function Parent() {
       this.name = ['Parent']
     }
     function Child() {}
     Child.prototype = new Parent()
     Child.prototype.setName = function(name) {
       this.name.push(name)
     }
     var person1 = new Child(),
         person2 = new Child()
     person1.setName('person1')
     console.log(person1.name)		// ['Parent', 'person1']
     console.log(person2.name)		// ['Parent', 'person1']
     ```

     å½“æ‰§è¡Œ `setName`æ–¹æ³•æ—¶ï¼Œç”±äºåœ¨`person1`ä¸­æ— æ³•æ‰¾åˆ°`this.name`ï¼Œè€Œæ˜¯åœ¨`Child.prototype`ä¸­æ‰¾åˆ°ï¼Œå› æ­¤æ‰å»æ‰§è¡Œ`push`æ–¹æ³•ã€‚

   - æ— æ³•å‘è¶…ç±»å‹ä¼ é€’å‚æ•°ï¼ˆ**è¶…ç±»å‹æŒ‡çš„æ˜¯çˆ¶ç±»æ„é€ å‡½æ•°ï¼**ï¼‰

     ä¸Šè¿°æ —å­å¯ä»¥çœ‹åˆ°ï¼Œå½“`person1å’Œperson2`æƒ³åœ¨`Parent`æ„é€ å‡½æ•°ä¸­ä¼ å…¥å‚æ•°æ—¶ï¼Œä¸Šè¿°æ —å­çš„ç¡®æ˜¯æ— æ³•åšåˆ°è¿™ä¸€ç‚¹ï¼Œä¸ºäº†è§£å†³è¿™ä¸¤ä¸ªé—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨å€Ÿç”¨æ„é€ å‡½æ•°ç»§æ‰¿æ–¹æ³•æ¥è§£å†³

äºŒã€å€Ÿç”¨æ„é€ å‡½æ•°

å€Ÿç”¨æ„é€ å‡½æ•°æ–¹æ³•ï¼Œæ˜¯ä¸ºäº†**è§£å†³åŸå‹é“¾ä¸­å¼•ç”¨ç±»å‹ä»¥åŠæ— æ³•å‘è¶…ç±»å‹ä¼ é€’å‚æ•°æ‰€å¸¦æ¥çš„é—®é¢˜æ–¹æ¡ˆ**ã€‚ç®€å•æ»´è¯´ï¼Œå°±æ˜¯é€šè¿‡ä½¿ç”¨`apply`å’Œ`call`æ–¹æ³•åœ¨å­ç±»å‹ä½œç”¨åŸŸä¸­ç›´æ¥æ‰§è¡Œçˆ¶ç±»å‹ï¼Œè¿›è€Œä¼ é€’å‚æ•°ã€‚

ç›´æ¥çœ‹æ —å­ğŸŒ°ï¼š

```javascript
function Parent(name) {
  this.name = [name]
}
function Child(name) {
  // åœ¨å­ç±»å‹ä¸­é€šè¿‡applyå’Œcallç›´æ¥æ‰§è¡ŒParentæ„é€ å‡½æ•°
  Parent.apply(this, arguments)
}
Child.prototype = new Parent()
Child.prototype.setName = function(name) {
  this.name.push(name)
}
var person1 = new Child('person1'),
    person2 = new Child('person2')
person1.setName('person3')
console.log(person1.name)		// ['person1', 'person3']
console.log(person2.name)		// ['person2']
```

å¦å¤–ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå€Ÿç”¨æ„é€ å‡½æ•°å…¶å®è·Ÿæ„é€ å‡½æ•°æ¨¡å¼å­˜åœ¨ä¸€æ ·çš„é—®é¢˜ï¼Œå°±æ˜¯**æ–¹æ³•æ— æ³•å¤ç”¨é—®é¢˜**ï¼Œå³åœ¨`Child`æˆ–	`Parent`æ„é€ å‡½æ•°ä¸­å®šä¹‰çš„æ–¹æ³•ï¼Œæ¯æ¬¡`new`å…¶å®ä¾‹æ—¶ï¼Œéƒ½ä¼šé‡æ–°åˆ›å»ºè¯¥æ–¹æ³•ï¼Œå°±æ— æ³•è¾¾åˆ°å¤ç”¨æ•ˆæœï¼ˆå¦‚æœæ˜¯åœ¨`Child`çš„åŸå‹ä¸­å®šä¹‰æ–¹æ³•ï¼Œæ–¹æ³•æ˜¯å…±äº«çš„ï¼Œä½†æ˜¯å°±ä½“ç°ä¸äº†ç»§æ‰¿çš„å«ä¹‰ï¼‰ã€‚

ä¸‰ã€ç»„åˆç»§æ‰¿ï¼ˆåŸå‹é“¾å’Œå€Ÿç”¨æ„é€ å‡½æ•°ç»“åˆï¼‰

ç»„åˆç»§æ‰¿ï¼Œä¸»ä½“æ€æƒ³å°±æ˜¯**ä½¿ç”¨åŸå‹é“¾åœ¨çˆ¶çº§åŸå‹ä¸­å®ç°å®ä¾‹çš„å…±äº«å±æ€§å’Œæ–¹æ³•ï¼Œå†ä½¿ç”¨å€Ÿç”¨æ„é€ å‡½æ•°æ¥å®ç°å®ä¾‹ç‹¬æœ‰çš„å±æ€§æˆ–æ–¹æ³•**ã€‚

çœ‹æ —å­ğŸŒ°ï¼š

```javascript
function Parent(name) {
  this.name = [name]
}
// çˆ¶çº§å…±äº«æ–¹æ³•ç»Ÿä¸€æ”¾åˆ°çˆ¶çº§åŸå‹ä¸­
Parent.prototype.setName = function(name) {
  this.name.push(name)
}
function Child(name) {
  Parent.apply(this, arguments)
}
Child.prototype = new Parent()
var person1 = new Child('person1'),
    person2 = new Child('person2')
console.log(person1.setName === person2.setName)		// true
```

ç»„åˆç»§æ‰¿å¯ä»¥æœ‰æ•ˆæ»´è§£å†³äº†åŸå‹é“¾ç»§æ‰¿çš„å¼•ç”¨ç±»å‹é—®é¢˜ä»¥åŠå€Ÿç”¨æ„é€ å‡½æ•°ä¸­æ–¹æ³•æ— æ³•å¤ç”¨çš„é—®é¢˜ï¼Œä¹Ÿæ˜¯å¸¸ç”¨çš„ä¸€ç§ç»§æ‰¿æ–¹å¼ã€‚

å››ã€åŸå‹ç»§æ‰¿

åŸå‹ç»§æ‰¿çš„æ€æƒ³å¾ˆç®€å•ï¼Œå€ŸåŠ©åŸå‹å¯åŸºäºå·²æœ‰çš„å¯¹è±¡æ¥è¿›è¡Œç»§æ‰¿ï¼Œè€Œä¸å¿…å†åˆ›å»ºè‡ªå®šä¹‰çš„ç±»å‹ã€‚ä»£ç æ€æƒ³å¦‚ä¸‹ï¼š

```javascript
function object(o) {
  function F() {}
  F.prototype = o
  return new F()
}
```

é€šè¿‡ä¼ å…¥ä¸€ä¸ªå·²æœ‰çš„å¯¹è±¡ï¼Œåˆ›å»ºä¸€ä¸ªä¸´æ—¶æ€§çš„æ„é€ å‡½æ•°ï¼Œå†å°†åŸå‹ç›´æ¥èµ‹å€¼ä¸ºä¼ å…¥å¯¹è±¡å®Œæˆä¸€ä¸ªç»§æ‰¿ï¼Œæœ€åå†è¿”å›è¿™ä¸ªæ–°çš„å¯¹è±¡å®ä¾‹ã€‚ï¼ˆå³å®ç°äº†ä¸€ä¸ªä¼ å…¥å¯¹è±¡çš„æµ…å¤åˆ¶ï¼‰

çœ‹å®è·µæ —å­ğŸŒ°ï¼š

```javascript
var parent = {
  name: ['parent']
}
var child1 = object(parent),
    child2 = object(parent)
child1.name.push('child1')
child2.name.push('child2')
console.log(child1.name)		// ['parent', 'child1', 'child2']
console.log(child2.name)		// ['parent', 'child1', 'child2']
console.log(child1)		// {}
```

å¯ä»¥çœ‹åˆ°ï¼Œç»§æ‰¿åå¹¶åˆ›å»ºçš„æ–°å¯¹è±¡å…¶å®æ˜¯ä¸€ä¸ªç©ºå¯¹è±¡ï¼Œå½“è®¿é—®`name`å±æ€§æ—¶å€™ï¼Œå°±æ˜¯è®¿é—®äº†ä¼ å…¥å¯¹è±¡ä¸­çš„å€¼ï¼Œå› æ­¤ä¹Ÿå°±å…±äº«äº†ä¼ å…¥å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•ã€‚

`ES5`ä¸­ä¸ºäº†ç®€åŒ–ï¼Œç›´æ¥å¯¹åŸå‹ç»§æ‰¿å°è£…äº†è¯­æ³•ç³–ï¼Œå³`Object.create()`æ–¹æ³•ï¼Œä½œç”¨è·Ÿä¸Šé¢çš„`object`æ–¹æ³•æ˜¯ä¸€æ ·çš„ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥ç›´æ¥åˆ›å»ºè‡ªå®šä¹‰å±æ€§é¿å…å…±äº«å¼•ç”¨ç±»å‹çš„é—®é¢˜ï¼š

```javascript
var parent = {
  name: ['parent']
}
var child1 = Object.create(parent, {
      name: {
        value: ['child1']
      }
    }),
    child2 = Object.create(parent)
child2.name.push('child2')
console.log(child1.name)		// ['child1']
console.log(child2.name)		// ['parent', 'child2']
```

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ`Object.create()`æ–¹æ³•ä¸­çš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œå…¶å®è·Ÿ`Object.defineProperties()`æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°ä¸€æ ·çš„ã€‚

äº”ã€å¯„ç”Ÿå¼ç»§æ‰¿

å¯„ç”Ÿå¼ç»§æ‰¿å¯ä»¥è¯´æ˜¯åŸå‹ç»§æ‰¿çš„ä¸€ä¸ªå°æ‹“å±•ï¼Œç®€å•æ»´è¯´ï¼Œå°±æ˜¯**åœ¨åŸå‹ç»§æ‰¿åŸºç¡€ä¸Šï¼Œå®šä¹‰è‡ªå®šä¹‰çš„æ–¹æ³•**ã€‚

```javascript
// å¯„ç”Ÿå¼ç»§æ‰¿æ–¹æ³•
function inheritObj(obj) {
  var clone = Object.create(obj)
  clone.sayName = function() {
    return this.name
  }
  return clone
}
var parent = {
  name: 'parent'
}
var child = inheritObj(parent)
console.log(child.sayName())		// 'parent'
```

å¯ä»¥çœ‹åˆ°ï¼Œ**å¯„ç”Ÿå¼ç»§æ‰¿å’ŒåŸå‹ç»§æ‰¿è€ƒè™‘çš„ç›®æ ‡éƒ½æ˜¯å·²åˆ›å»ºå¥½å¯¹è±¡**ï¼Œè€Œä¸æ˜¯è€ƒè™‘è‡ªå®šä¹‰ç±»å‹å’Œæ„é€ å‡½æ•°ã€‚

å¯„ç”Ÿå¼ç»§æ‰¿å­˜åœ¨é—®é¢˜è·Ÿæ„é€ å‡½æ•°ä¸€è‡´ï¼Œå°±æ˜¯æ¯æ¬¡è°ƒç”¨`inheritObj`æ–¹æ³•æ—¶ï¼Œéƒ½éœ€è¦é‡æ–°åˆ›å»º`sayName`æ–¹æ³•ï¼Œå³**æ–¹æ³•æ— æ³•å¤ç”¨**çš„é—®é¢˜ã€‚

å…­ã€å¯„ç”Ÿå¼ç»„åˆç»§æ‰¿

è™½è¯´ç»„åˆç»§æ‰¿æ˜¯æ™®ééƒ½èƒ½æ¥å—å’Œä½¿ç”¨çš„ç»§æ‰¿æ–¹å¼ï¼Œä½†ç»„åˆç»§æ‰¿ä¹Ÿå­˜åœ¨é—®é¢˜ï¼Œå³éœ€è¦è°ƒç”¨ä¸¤æ¬¡çˆ¶ç±»å‹æ„é€ å‡½æ•°ï¼Œç¬¬ä¸€æ¬¡ä¼šåˆå§‹åŒ–å±æ€§ï¼Œç¬¬äºŒæ¬¡è°ƒç”¨æ—¶å°±ä¼šé‡å†™è¯¥å±æ€§ï¼Œçœ‹ä»£ç ï¼š

```javascript
function Parent(name) {
  this.name = name
}
Parent.sayName = function() {
  return this.name
}
function Child(name) {
  Parent.apply(this, arguments)		// ç¬¬äºŒæ¬¡è°ƒç”¨ï¼ˆé‡å†™åˆå§‹åŒ–å±æ€§ï¼‰
}
child.prototype = new Parent()		// ç¬¬ä¸€æ¬¡è°ƒç”¨ï¼ˆåˆå§‹åŒ–å±æ€§ï¼Œå…¶å®è¿™ä¸€æ­¥æ²¡å¿…è¦ï¼‰
console.log(Child.prototype, Parent.prototype)
// ParentÂ {name: undefined}
// {constructor: Æ’}
```

ä¸Šè¿°ä»£ç ï¼Œå¯ä»¥çœ‹åˆ°ç¬¬ä¸€æ¬¡è°ƒç”¨çˆ¶ç±»å‹æ„é€ å‡½æ•°æ˜¯æ²¡å¿…è¦ï¼Œå®ƒçš„ä¸»è¦ä½œç”¨å°±æ˜¯ä¸ºäº†èƒ½å¤Ÿè®©`child`åŸå‹å’Œ`parent`åŸå‹å»ºç«‹å…³ç³»ï¼Œè€Œåˆå§‹åŒ–å±æ€§å°±æ˜¯å®Œå…¨æ²¡å¿…è¦äº†ï¼Œå› ä¸ºè°ƒç”¨å­ç±»å‹æ„é€ å‡½æ•°åˆ›å»ºå®ä¾‹æ—¶å°±ä¼šè¿›è¡Œåˆå§‹åŒ–å±æ€§ã€‚

ä¸ºæ­¤ï¼Œå¯„ç”Ÿå¼ç»„åˆç»§æ‰¿å¯è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå³åªéœ€æ„å»ºå­ç±»å‹åŸå‹å’Œçˆ¶ç±»å‹åŸå‹ä¹‹é—´å…³ç³»å³å¯ï¼Œè€Œåˆå§‹åŒ–ä»…ä»…äº¤ç»™å€Ÿç”¨æ„é€ å‡½æ•°å³å¯ã€‚

```javascript
// å¯„ç”Ÿå¼ç»„åˆç»§æ‰¿æ„å»ºå­ç±»å‹åŸå‹å’Œçˆ¶ç±»å‹åŸå‹ä¹‹é—´å…³ç³»
function inheritObj(child, parent) {
  var clone = Object.create(parent.prototype)
  clone.constructor = child
  child.prototype = clone
}
function Parent(name) {
  this.name = name
}
Parent.prototype.sayName = function() {
  return this.name
}
function Child(name) {
  Parent.apply(this, arguments)
}
inheritObj(Child, Parent)
console.log(Child.prototype, Parent.prototype)
// ParentÂ {constructor: Æ’}
// {sayName: Æ’, constructor: Æ’}
```

å¯¹æ¯”ç»„åˆç»§æ‰¿ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œåˆå§‹åŒ–å±æ€§è¿™ä¸€æ­¥å¹¶ä¸å†æ‰§è¡Œï¼Œå¹¶ä¸”ä¹Ÿä¸ä¼šå†é€šè¿‡`new Parent()`æ–¹æ³•æ¥æ„å»ºçˆ¶ç±»å‹å’Œå­ç±»å‹åŸå‹ä¹‹é—´å…³ç³»ï¼Œè€Œæ˜¯ç›´æ¥ä½¿ç”¨åŸå‹ç»§æ‰¿æ¥æ„å»ºçˆ¶ç±»å‹çš„åŸå‹å’Œå­ç±»å‹çš„åŸå‹ä¹‹é—´å…³ç³»ã€‚

