(window.webpackJsonp=window.webpackJsonp||[]).push([[79],{241:function(t,e,a){"use strict";a.r(e);var s=a(0),n=Object(s.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"about-react-render-and-update-ä¸ªäººè§è§£"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#about-react-render-and-update-ä¸ªäººè§è§£"}},[t._v("#")]),t._v(" About React Render And Update(ä¸ªäººè§è§£)")]),t._v(" "),a("p",[a("code",[t._v("React")]),t._v("ä¸»æ‰“å‡½æ•°å¼æ€æƒ³ï¼Œè®¾è®¡ç†å¿µå°±æ˜¯"),a("code",[t._v("allÂ inÂ js")]),t._v("ï¼Œå¦å¤–æ¨å´‡çš„æ˜¯æ•°æ®ä¸å¯å˜æ€§ï¼Œæ‰€æœ‰çš„æ•°æ®æ›´æ–°éƒ½éœ€æ‰‹åŠ¨å»æ“ä½œï¼Œä¾¿äºæé«˜åº”ç”¨çš„å¯æ§æ€§ã€‚")]),t._v(" "),a("p",[t._v("æœ¬æ–‡å°±æ˜¯ä»¥"),a("code",[t._v("React")]),t._v("ä¸ºä¸»ä½“ï¼Œç®€å•æ»´è°ˆä¸€è°ˆä¸ªäººå¯¹äº"),a("code",[t._v("React")]),t._v("åœ¨æ¸²æŸ“å±‚é¢ä»¥åŠæ›´æ–°å±‚é¢çš„ä¸€äº›è§è§£ï¼Œå½“ä¸­éš¾å…ä¼šå‡ºç°ä¸€äº›é”™è¯¯çš„è§‚ç‚¹ï¼Œè¿˜è¯·å„ä½ç«¥é‹å¤§å¤§ä»¬å¤šå¤šæŒ‡ç‚¹ä¸€ä¸‹å“ˆ ğŸ™ˆã€‚")]),t._v(" "),a("h2",{attrs:{id:"ç›®å½•"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç›®å½•"}},[t._v("#")]),t._v(" ç›®å½•")]),t._v(" "),a("ol",[a("li",[a("p",[a("a",{attrs:{href:"#1"}},[t._v("Renderï¼ˆæ¸²æŸ“ï¼‰")])]),t._v(" "),a("p",[t._v("1.1 "),a("a",{attrs:{href:"#11"}},[t._v("ç¬¬ä¸€æ¬¡æ¸²æŸ“æƒ…å†µ")])]),t._v(" "),a("p",[t._v("1.2 "),a("a",{attrs:{href:"#12"}},[t._v("åç»­æ¸²æŸ“æƒ…å†µ")])])]),t._v(" "),a("li",[a("p",[a("a",{attrs:{href:"#2"}},[t._v("Updateï¼ˆæ›´æ–°ä¹‹è°ƒåº¦ä»»åŠ¡ï¼‰")])])])]),t._v(" "),a("h2",{attrs:{id:"renderï¼ˆæ¸²æŸ“ï¼‰"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#renderï¼ˆæ¸²æŸ“ï¼‰"}},[t._v("#")]),t._v(" Renderï¼ˆæ¸²æŸ“ï¼‰")]),t._v(" "),a("p",[t._v("åœ¨åˆ†æ"),a("code",[t._v("Render")]),t._v("å‰ï¼Œæˆ‘å…ˆå¼•ä¸€æ®µä»£ç ã€‚")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" React "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" ReactDOM "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react-dom'")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("App")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("React"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("component")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// çœç•¥")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nReactDOM"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("App "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("querySelector")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'#root'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("ç›¸ä¿¡å¤§å®¶å¯¹äºä¸Šè¿°è¿™å¨ä»£ç å°¤ä¸ºç†Ÿæ‚‰ï¼Œä¸ç®¡ç¼–å†™çš„"),a("code",[t._v("App")]),t._v("ç»„ä»¶æœ‰å¤šå¤æ‚ï¼Œç»ˆç©¶éƒ½ä¼šé€šè¿‡"),a("code",[t._v("React.render")]),t._v("æ–¹æ³•æ¥æŒ‚è½½åˆ°ç›¸åº”çš„"),a("code",[t._v("DOM")]),t._v("å…ƒç´ ä¸‹ã€‚")]),t._v(" "),a("p",[t._v("é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œåœ¨"),a("code",[t._v("ReactDOM.render")]),t._v("æ–¹æ³•ä¸­ç©¶ç«Ÿå‘ç”Ÿäº†ä»€ä¹ˆäº‹æƒ…ï¼Ÿ")]),t._v(" "),a("p",[t._v("åœ¨è¿™é‡Œï¼Œæˆ‘ä¼šè¯´æ˜ä¸€ä¸‹ï¼Œ"),a("code",[t._v("Render")]),t._v("è¿‡ç¨‹ä¸­ä¼šåˆ†ä¸ºä¸¤ç§æƒ…å†µï¼Œåˆ†åˆ«æ˜¯ï¼š")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("ç¬¬ä¸€æ¬¡æ¸²æŸ“æƒ…å†µï¼Œä»"),a("code",[t._v("root")]),t._v("å¼€å§‹ï¼Œå…ˆåˆ›å»ºä¸€ä¸ª"),a("code",[t._v("VirtualÂ DOM")]),t._v("ï¼Œå†ç›´æ¥æ¸²æŸ“å‡ºä¸€ä¸ªçœŸå®"),a("code",[t._v("DOM")])]),t._v("ã€‚")]),t._v(" "),a("li",[a("strong",[t._v("åç»­æ¸²æŸ“æƒ…å†µï¼Œå…ˆåˆ›å»ºä¸€ä¸ªæ–°"),a("code",[t._v("VirtualÂ DOM")]),t._v("ï¼Œä¸æ—§"),a("code",[t._v("VirtualÂ DOM")]),t._v("è¿›è¡Œ"),a("code",[t._v("diff")]),t._v("ï¼Œå†æ‰¹é‡æ»´æ¸²æŸ“åˆ°çœŸå®"),a("code",[t._v("DOM")]),t._v("ä¸­")]),t._v("ã€‚")])]),t._v(" "),a("blockquote",[a("p",[a("span",{attrs:{id:"11"}},[t._v("ç¬¬ä¸€æ¬¡æ¸²æŸ“æƒ…å†µ")])])]),t._v(" "),a("p",[t._v("å…ˆæ¥çœ‹çœ‹ç¬¬ä¸€æ¬¡æ¸²æŸ“æƒ…å†µä¸­åˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆäº‹æƒ…ï¼Ÿä¸‹é¢æˆ‘å°±ä¸å¯¹æºç è´´å‡ºï¼Œç›´æ¥è¯´å‡ºæ¥ï¼ˆå½“ä¸­å¯¹äºéƒ¨åˆ†ä¸ç†è§£ç«¥é‹éš¾å…ä¼šæœ‰äº›éš¾ä»¥ç†è§£ï¼Œåé¢æœ‰æ—¶é—´æˆ‘ä¼šå•ç‹¬è®²è®²"),a("code",[t._v("React")]),t._v("æºç å“ˆï½ï¼‰")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("é¦–å…ˆåœ¨è°ƒç”¨"),a("code",[t._v("ReactDOM.render")]),t._v("æ—¶ï¼Œå…¶å†…éƒ¨ä¼šæ‰§è¡Œä¸€ä¸ª"),a("code",[t._v("legacyRenderSubtreeIntoContainer")]),t._v("æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¼šåˆ¤æ–­æ˜¯å¦å·²å­˜åœ¨"),a("code",[t._v("root")]),t._v("ã€‚")])]),t._v(" "),a("li",[a("p",[t._v("å½“åˆ¤æ–­ä¸å­˜åœ¨"),a("code",[t._v("root")]),t._v("æ—¶ï¼Œå°±ä¼šä½¿ç”¨"),a("code",[t._v("legacyCreateRootFromDOMContainer")]),t._v("æ–¹æ³•åˆ›å»ºä¸€ä¸ª"),a("code",[t._v("root")]),t._v("å¯¹è±¡ï¼Œå¹¶æŒ‚è½½åœ¨"),a("code",[t._v("container._reactRootContainer")]),t._v("ï¼ˆå³"),a("code",[t._v("document.querySelector('#root')._reactRootContainer")]),t._v("ï¼‰ä¸­ã€‚")])]),t._v(" "),a("li",[a("p",[t._v("åœ¨æ–¹æ³•"),a("code",[t._v("legacyCreateRootFromDOMContainer")]),t._v("ä¸­ï¼Œä¼šå…ˆå°†å®¹å™¨å†…éƒ¨çš„æ‰€æœ‰èŠ‚ç‚¹è¿›è¡Œç§»é™¤ã€‚")]),t._v(" "),a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("root"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("p",[t._v("åœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æˆ‘åƒä¸Šé¢è¿™æ ·å»ç¼–å†™æ ¹æ¨¡æ¿ã€‚æ¥ç€å°±ä¼š"),a("strong",[t._v("ä½¿ç”¨"),a("code",[t._v("ReactRoot")]),t._v("æ„é€ å‡½æ•°åˆ›å»º"),a("code",[t._v("root")]),t._v("å¯¹è±¡")]),t._v("ã€‚ï¼ˆå³**"),a("code",[t._v("root")]),t._v("å¯¹è±¡ --\x3e "),a("code",[t._v("newÂ ReactRoot()")]),t._v("**ï¼‰ã€‚")])]),t._v(" "),a("li",[a("p",[t._v("åœ¨æ„é€ å‡½æ•°"),a("code",[t._v("ReactRoot")]),t._v("ä¸­ï¼Œä¼šä½¿ç”¨"),a("code",[t._v("createContainer")]),t._v("æ–¹æ³•åˆ›å»ºä¸€ä¸ª"),a("code",[t._v("FiberRoot")]),t._v("å¯¹è±¡ï¼Œå¹¶æŒ‚è½½åœ¨"),a("code",[t._v("root")]),t._v("å¯¹è±¡çš„"),a("code",[t._v("_internalRoot")]),t._v("å±æ€§ä¸­ï¼Œå…¶ä¸­"),a("code",[t._v("createContainer")]),t._v("æ–¹æ³•ä½¿ç”¨çš„æ˜¯"),a("code",[t._v("createFiberRoot")]),t._v("æ–¹æ³•åˆ›å»ºã€‚")]),t._v(" "),a("p",[t._v("éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œ"),a("strong",[a("code",[t._v("fiber")]),t._v("æ˜¯ä¸€ä¸ªæ ‘ç»“æ„ï¼Œå’Œ"),a("code",[t._v("DOM")]),t._v("æ ‘ä¸­èŠ‚ç‚¹ä¸€ä¸€å¯¹åº”ï¼Œå³æ¯ä¸€ä¸ª"),a("code",[t._v("DOM")]),t._v("èŠ‚ç‚¹éƒ½ä¼šå¯¹åº”ä¸€ä¸ª"),a("code",[t._v("fiber")]),t._v("å¯¹è±¡ï¼Œè€Œ"),a("code",[t._v("FiberRoot")]),t._v("å¯¹è±¡å¯¹åº”æ ¹èŠ‚ç‚¹"),a("code",[t._v("Root")])]),t._v("ã€‚")])]),t._v(" "),a("li",[a("p",[t._v("åœ¨"),a("code",[t._v("createFiberRoot")]),t._v("æ–¹æ³•ä¸­ï¼Œä½¿ç”¨"),a("code",[t._v("FiberRootNode")]),t._v("æ„é€ å‡½æ•°åˆ›å»º"),a("code",[t._v("FiberRoot")]),t._v("å¯¹è±¡ï¼Œç„¶åä½¿ç”¨"),a("code",[t._v("createHostRootFiber")]),t._v("æ–¹æ³•åˆ›å»ºä¸€ä¸ª"),a("code",[t._v("RootFiber")]),t._v("å¯¹è±¡ï¼Œå¹¶æŒ‚è½½åˆ°"),a("code",[t._v("FiberRoot")]),t._v("å¯¹è±¡çš„"),a("code",[t._v("current")]),t._v("å±æ€§ä¸­ï¼ˆ"),a("strong",[t._v("å³"),a("code",[t._v("FiberRoot.currentÂ ===Â RootFiber")])]),t._v("ï¼‰ã€‚")])]),t._v(" "),a("li",[a("p",[t._v("å¯¹äº"),a("code",[t._v("FiberRoot")]),t._v("å¯¹è±¡ï¼Œåªéœ€ç†è§£å…¶ä¸¤ä¸ªå±æ€§ï¼Œåˆ†åˆ«æ˜¯"),a("code",[t._v("containerInfo")]),t._v("å’Œ"),a("code",[t._v("current")]),t._v("å±æ€§ã€‚å…¶ä¸­å‰è€…ä»£è¡¨æ˜¯"),a("code",[t._v("document.querySelector('#root')")]),t._v("ï¼Œåè€…ä»£è¡¨çš„æ˜¯"),a("code",[t._v("RootFiber")]),t._v("ã€‚")])]),t._v(" "),a("li",[a("p",[t._v("å¯¹äº"),a("code",[t._v("RootFiber")]),t._v("å¯¹è±¡ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹è¦ç†è§£çš„å±æ€§ã€‚")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n  stateNode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" any"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Fiber "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  child"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Fiber "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  sibling"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Fiber "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  effectTag"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" SideEffectTag"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  alternate"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Fiber "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("ul",[a("li",[t._v("stateNodeï¼šæŒ‡å‘"),a("code",[t._v("FiberRoot")]),t._v("å¯¹è±¡ã€‚")]),t._v(" "),a("li",[t._v("returnï¼šæŒ‡å‘å½“å‰èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ã€‚")]),t._v(" "),a("li",[t._v("childï¼šæŒ‡å‘å½“å‰èŠ‚ç‚¹çš„å­èŠ‚ç‚¹ã€‚")]),t._v(" "),a("li",[t._v("siblingï¼šæŒ‡å‘å½“å‰èŠ‚ç‚¹çš„å…„å¼ŸèŠ‚ç‚¹ã€‚")]),t._v(" "),a("li",[t._v("effectTagï¼šæŒ‡ä»£è®°å½•"),a("code",[t._v("DOM")]),t._v("æ“ä½œï¼Œå¦‚å¢åˆ æ”¹ã€‚")]),t._v(" "),a("li",[t._v("alternateï¼šæŒ‡å‘å…¶æ—§æ ‘å¯¹åº”çš„èŠ‚ç‚¹ã€‚éœ€è¦æ¸…æ¥šçš„æ˜¯ï¼Œ"),a("strong",[t._v("å­˜åœ¨æ–°æ—§ä¸¤ä¸ª"),a("code",[t._v("fiber")]),t._v("æ ‘ï¼Œæ—§æ ‘ç§°ä¸º"),a("code",[t._v("oldÂ tree")]),t._v("ï¼Œæ–°æ ‘ç§°ä¸º"),a("code",[t._v("workInProgressÂ tree")]),t._v("ï¼Œå…¶ä¸­å‰è€…ä»£è¡¨æ¸²æŸ“å¥½çš„"),a("code",[t._v("DOM")]),t._v("æ ‘ï¼Œåè€…åˆ™ä»£è¡¨æ­£åœ¨æ‰§è¡Œæ›´æ–°çš„"),a("code",[t._v("fiber")]),t._v("æ ‘ï¼Œå½“æ›´æ–°ç»“æŸåï¼Œ"),a("code",[t._v("workInProgressÂ tree")]),t._v("å°†ä¼šæ›¿æ¢"),a("code",[t._v("oldÂ tree")])]),t._v("ã€‚")])])])]),t._v(" "),a("p",[t._v("ä¸‹é¢æˆ‘ä»¬å°±ä»¥ä¸€å¼ å›¾ç®€å•çœ‹çœ‹ä¸‹é¢è¿™æ®µä»£ç åœ¨ç¬¬ä¸€æ¬¡æ¸²æŸ“æ—¶ï¼Œæ‰€å­˜åœ¨çš„å…³ç³»ã€‚")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" React "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" ReactDOM "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'react-dom'")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("App")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  \t"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    \t"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("p"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("p"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    \t"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("span"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("span"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("div"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nReactDOM"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("App "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("querySelector")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'#root'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/Andraw-lin/keep-Learning/master/asset/React%E7%AC%AC%E4%B8%80%E6%AC%A1%E6%B8%B2%E6%9F%93%E5%85%B3%E7%B3%BB%E5%9B%BE.jpg",alt:"Reactç¬¬ä¸€æ¬¡æ¸²æŸ“å…³ç³»å›¾"}})]),t._v(" "),a("blockquote",[a("p",[a("span",{attrs:{id:"12"}},[t._v("åç»­æ¸²æŸ“æƒ…å†µ")])])]),t._v(" "),a("p",[t._v("æ¥ä¸‹æ¥å°±è¦è¯´çš„å°±æ˜¯åç»­æ¸²æŸ“æƒ…å†µï¼Œä¸Šé¢å·²ç»è¯´è¿‡ï¼Œå½“å‘ç°å·²ç»å­˜åœ¨æ—§çš„"),a("code",[t._v("VirtualÂ DOM")]),t._v("åï¼ˆå³å·²å­˜åœ¨"),a("code",[t._v("root")]),t._v("å¯¹è±¡ï¼‰ï¼Œåˆ™ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„"),a("code",[t._v("Virtual DOM")]),t._v("ï¼Œå¹¶ä¸”é€šè¿‡"),a("code",[t._v("diff")]),t._v("ç®—æ³•ï¼Œæ‰¹é‡æ›´æ–°åˆ°çœŸå®"),a("code",[t._v("DOM")]),t._v("ä¸­ã€‚")]),t._v(" "),a("p",[t._v("é‚£ä¹ˆåœ¨åç»­çš„æ¸²æŸ“è¿‡ç¨‹ä¸­ï¼Œåˆæ˜¯å¦‚ä½•å¤„ç†çš„ï¼Ÿæˆ‘ä»¬æ¥ç€çœ‹ ğŸ¤”")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("ç”±äºå·²å­˜åœ¨"),a("code",[t._v("root")]),t._v("å¯¹è±¡ï¼ˆå³"),a("code",[t._v("newÂ ReactRoot()")]),t._v("ï¼‰ï¼Œä¼šç›´æ¥è°ƒç”¨"),a("code",[t._v("root.render(children, callback)")]),t._v("æ–¹æ³•ï¼ˆå³"),a("code",[t._v("ReactRoot.prototype.render")]),t._v("ï¼‰ã€‚åœ¨è¯¥æ–¹æ³•ä¸­ï¼Œé¦–å…ˆå…ˆå–å¾—"),a("code",[t._v("root._internalRoot")]),t._v("å³"),a("code",[t._v("FiberRoot")]),t._v("å¯¹è±¡ï¼Œç„¶åç›´æ¥æ„å»º"),a("code",[t._v("newÂ ReactWork()")]),t._v("ï¼ˆè¯¥æ„å»ºå¯¹è±¡ä½œç”¨æ˜¯ä¾¿äºç»„ä»¶æ¸²æŸ“æˆ–æ›´æ–°åæŠŠ"),a("code",[t._v("render")]),t._v("ä¸­çš„"),a("code",[t._v("callback")]),t._v("å…¨éƒ¨è°ƒç”¨ä¸€éï¼‰ã€‚")])]),t._v(" "),a("li",[a("p",[t._v("æ¥ç€è°ƒç”¨"),a("code",[t._v("updateContainer")]),t._v("æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¸­ä¼šé€šè¿‡"),a("code",[t._v("FiberRoot")]),t._v("å¯¹è±¡ä¸­çš„"),a("code",[t._v("current")]),t._v("å±æ€§è·å–åˆ°"),a("code",[t._v("fiberÂ tree")]),t._v("ï¼ˆå³æ—§æ ‘ï¼‰ã€‚ç„¶åé€šè¿‡"),a("code",[t._v("requestCurrentTime")]),t._v("æ–¹æ³•è®¡ç®—"),a("code",[t._v("currentTime")]),t._v("ä»»åŠ¡çš„å½“å‰æ—¶é—´ï¼Œé€šè¿‡"),a("code",[t._v("computeExpirationForFiber")]),t._v("æ–¹æ³•è®¡ç®—ä»»åŠ¡è¿‡æœŸæ—¶é—´ã€‚")])]),t._v(" "),a("li",[a("p",[t._v("åœ¨æ–¹æ³•"),a("code",[t._v("requestCurrentTime")]),t._v("ä¸­ï¼Œé€šè¿‡"),a("code",[t._v("performance.now()Â - orginalStartTimeMs")]),t._v("å¾—åˆ°"),a("code",[t._v("currentTime")]),t._v("å½“å‰æ—¶é—´ï¼Œå…¶ä¸­"),a("code",[t._v("performance.now()")]),t._v("æ˜¯å½“å‰æ—¶é—´ï¼Œ"),a("code",[t._v("orginalStartTimeMs")]),t._v("åˆ™æ˜¯æ•´ä¸ª"),a("code",[t._v("React")]),t._v("åº”ç”¨åˆå§‹åŒ–æ—¶é—´ï¼ˆåˆå§‹åŒ–æ—¶å°±åˆ›å»ºï¼Œå›ºå®šä¸å˜çš„å¸¸é‡ï¼‰ï¼Œå¾—åˆ°çš„**"),a("code",[t._v("currentTime")]),t._v("åˆ™æ˜¯å½“å‰ä»»åŠ¡è·ç¦»åº”ç”¨åˆå§‹åŒ–æ—¶é—´çš„æ—¶é—´é—´éš”**ã€‚")]),t._v(" "),a("p",[t._v("æœ€åå¾—åˆ°"),a("code",[t._v("currentTime")]),t._v(" æ—¶é—´é—´éš”è¿›è¡Œ"),a("strong",[t._v("å–æ•´å¤„ç†ï¼Œå³(currentTime | 0)")]),t._v("ã€‚")])]),t._v(" "),a("li",[a("p",[t._v("æ¥ç€è®¡ç®—"),a("code",[t._v("expirationTime")]),t._v("è¿‡æœŸæ—¶é—´ï¼Œè¯¥æ—¶é—´"),a("strong",[t._v("å’Œä¼˜å…ˆçº§ç›¸å…³ï¼Œå€¼è¶Šå¤§ï¼Œä¼˜å…ˆçº§å°±è¶Šé«˜")]),t._v("ã€‚åœ¨æ–¹æ³•"),a("code",[t._v("computeExpiration")]),t._v("ä¸­ï¼Œå…¶å®å°±æ˜¯"),a("strong",[t._v("å°†å½“å‰æ—¶é—´"),a("code",[t._v("performance.now()")]),t._v("åŠ ä¸Šä¸€ä¸ªä¼˜å…ˆçº§å¸¸é‡å¾—åˆ°"),a("code",[t._v("expiration")]),t._v("è¿‡æœŸæ—¶é—´")]),t._v("ã€‚")]),t._v(" "),a("p",[t._v("åœ¨"),a("code",[t._v("React")]),t._v("ä¸­å…±åˆ†ä¸ºäº”ç§ä¼˜å…ˆçº§ï¼Œåˆ†åˆ«æ˜¯")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center"}},[t._v("ç±»å‹")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("ä¼˜å…ˆçº§")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("ä¼˜å…ˆçº§å¸¸é‡")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("ImmediatePriorityï¼ˆç«‹å³æ‰§è¡Œä¼˜å…ˆçº§ï¼‰")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("1")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("-1")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("UserBlockingPriorityï¼ˆç”¨æˆ·äº¤äº’ä¼˜å…ˆçº§ï¼‰")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("2")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("250")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("NormalPriorityï¼ˆæ­£å¸¸ä¼˜å…ˆçº§ï¼‰")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("3")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("5000")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("LowPriorityï¼ˆä½ä¼˜å…ˆçº§ï¼‰")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("4")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("10000")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("IdlePriorityï¼ˆç©ºé—²ä¼˜å…ˆçº§ï¼‰")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("5")]),t._v(" "),a("td",{staticStyle:{"text-align":"center"}},[t._v("maxSigned31BitInt(çº¦1073741823)")])])])])]),t._v(" "),a("li",[a("p",[t._v("æœ€åä¼šåˆ›å»ºä¸€ä¸ª"),a("code",[t._v("update")]),t._v("å¯¹è±¡ï¼Œè¯¥å¯¹è±¡ä¸»è¦è·Ÿ"),a("code",[t._v("setState")]),t._v("ç›¸å…³è”ï¼Œä¸»è¦ç†è§£å±æ€§åŒ…æ‹¬")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// updateå¯¹è±¡")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n  expirationTime"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" expirtationTime"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// è¿™æ¬¡æ›´æ–°çš„è¿‡æœŸæ—¶é—´")]),t._v("\n  payload"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// setStateçš„ç¬¬ä¸€ä¸ªå‚æ•°")]),t._v("\n  callback"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// setStateçš„ç¬¬äºŒä¸ªå‚æ•°")]),t._v("\n  next"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç”¨äºå¯»æ‰¾é˜Ÿåˆ—ä¸­çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹")]),t._v("\n  nextEffect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ç”¨äºæ‰§è¡Œé˜Ÿåˆ—ä¸­ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„DOMç›¸å…³æ“ä½œ")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[a("strong",[t._v("å¯¹äºä»»ä½•ä¸€ä¸ªè§¦å‘"),a("code",[t._v("render")]),t._v("çš„æ“ä½œï¼Œéƒ½ä¼šåˆ›å»ºä¸€ä¸ª"),a("code",[t._v("update")]),t._v("å¯¹è±¡ï¼Œä½¿ç”¨é˜Ÿåˆ—æ–¹å¼è¿›è¡Œå­˜å‚¨ï¼Œå…¶ä¸­"),a("code",[t._v("next")]),t._v("å±æ€§å°±æ˜¯ç”¨äºæŸ¥æ‰¾ä¸‹ä¸€ä¸ª"),a("code",[t._v("update")]),t._v("èŠ‚ç‚¹")]),t._v("ã€‚")]),t._v(" "),a("p",[t._v("å¯¹äºæ‰¹é‡æ›´æ–°çš„è¿‡ç¨‹ä¸­ï¼Œç”±äºåˆ›å»ºå¤šä¸ª"),a("code",[t._v("update")]),t._v("å¯¹è±¡ï¼Œåœ¨ç­‰åˆ°æµè§ˆå™¨å®¢æˆ·ç«¯ç©ºé—²æ—¶ï¼Œå°±ä¼šæŒ‰ä¼˜å…ˆçº§å¤§å°è¿›è¡Œæ‰¹é‡æ›´æ–°ï¼Œä½†æ˜¯ä¹Ÿéœ€è¦é‡ç‚¹ç»“åˆ"),a("code",[t._v("expirationTime")]),t._v("è¿‡æœŸæ—¶é—´ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¹Ÿæ˜¯æ‰€è°“çš„è°ƒåº¦ä»»åŠ¡ã€‚ï¼ˆè¿™ä¹Ÿæ˜¯èƒ½è§£é‡Šä¸ºä»€ä¹ˆå¤šæ¬¡è°ƒç”¨"),a("code",[t._v("setState")]),t._v("ï¼Œæœ€åéƒ½åªæ˜¯æ›´æ–°ä¸€æ¬¡ï½ğŸ¤”ï¼‰")])])]),t._v(" "),a("h2",{attrs:{id:"updateï¼ˆæ›´æ–°ä¹‹è°ƒåº¦ä»»åŠ¡ï¼‰"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#updateï¼ˆæ›´æ–°ä¹‹è°ƒåº¦ä»»åŠ¡ï¼‰"}},[t._v("#")]),t._v(" Updateï¼ˆæ›´æ–°ä¹‹è°ƒåº¦ä»»åŠ¡ï¼‰")]),t._v(" "),a("p",[t._v("å…ˆæŠ›ä¸€ä¸ªé—®é¢˜ï¼Œå½“æˆ‘ä»¬"),a("code",[t._v("setState")]),t._v("æ—¶ï¼Œåœ¨åç»­å–åˆ°çš„å€¼ä¾ç„¶æ˜¯æ—§çš„å€¼ï¼Ÿç›¸ä¿¡å¤§å®¶éƒ½æ¸…æ¥šï¼Œåœ¨"),a("code",[t._v("React")]),t._v("ä¸­ä¼šé€šè¿‡è°ƒåº¦ä»»åŠ¡è¿›è¡Œåˆ†é…ï¼Œé‚£ä¹ˆ"),a("code",[t._v("setState")]),t._v("ç”±äºåç»­éœ€è¦æ‰¹é‡æ›´æ–°ï¼Œä¼˜å…ˆçº§ä¸é«˜ï¼Œæ‰€ä»¥éƒ½ä¼šå»¶åå¤„ç†ï¼Œè¿™å°±å¯¼è‡´ä¸ºä»€ä¹ˆ"),a("code",[t._v("setState")]),t._v("åå–åˆ°çš„å€¼ä¾ç„¶æ˜¯æ—§çš„å€¼ã€‚")]),t._v(" "),a("p",[t._v("é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œè°ƒåº¦çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ")]),t._v(" "),a("p",[t._v("æˆ‘ä»¬çŸ¥é“ï¼Œå½“ç‚¹å‡»ä¸€ä¸ªæŒ‰é’®æ—¶ï¼Œè‹¥"),a("code",[t._v("setState")]),t._v("æ›´æ–°çŠ¶æ€ï¼Œå°±ä¼šè§¦å‘ç»„ä»¶è¿›è¡Œæ¸²æŸ“ï¼Œç”±äº"),a("code",[t._v("js")]),t._v("æ˜¯å•çº¿ç¨‹çš„ï¼Œè‹¥æ­¤æ—¶è¿˜è¦ç­‰å¾…ç»„ä»¶æ¸²æŸ“ç»“æŸåå†å»åšä¸€äº›å…³é”®"),a("code",[t._v("js")]),t._v("é€»è¾‘å¤„ç†ï¼Œåªä¼šè®©ç”¨æˆ·æ„Ÿè§‰åˆ°å¡é¡¿çš„æ„Ÿè§‰ï¼Œä¸ºæ­¤ï¼Œè°ƒåº¦çš„ä½œç”¨å°±æ˜¯æ¥å¤„ç†è¿™äº›äº‹æƒ…çš„ã€‚")]),t._v(" "),a("p",[t._v("è°ƒåº¦çš„ä½œç”¨å°±æ˜¯ï¼Œ"),a("strong",[a("code",[t._v("react")]),t._v("ä¼šæ ¹æ®ä»»åŠ¡çš„ä¼˜å…ˆçº§è®¡ç®—å‡ºå„è‡ªçš„"),a("code",[t._v("expirationTime")]),t._v("è¿‡æœŸæ—¶é—´ï¼Œç„¶åæ ¹æ®è¿‡æœŸæ—¶é—´é€ä¸ªæ”¾å…¥åˆ°ä¸€ä¸ªé˜Ÿåˆ—ä¸­è¿›è¡Œç®¡ç†ï¼Œå½“æµè§ˆå™¨ç©ºé—²æ—¶ï¼Œå°±ä¼šå…ˆå¤„ç†ä¼˜å…ˆçº§é«˜çš„ä»»åŠ¡ï¼Œå¹¶ä¸”ä¼˜å…ˆçº§é«˜çš„ä»»åŠ¡å¯ä»¥ä¸­æ–­ä¼˜å…ˆçº§ä½çš„ä»»åŠ¡")]),t._v("ã€‚")]),t._v(" "),a("p",[t._v("é‚£ä¹ˆå‰©ä¸‹ä¸€ä¸ªé—®é¢˜ï¼Œå®ƒæ˜¯å¦‚ä½•å®ç°çš„å‘¢ï¼Ÿ")]),t._v(" "),a("p",[t._v("ç­”æ¡ˆå°±æ˜¯"),a("strong",[t._v("æ ¹æ®ä»»åŠ¡ä¼˜å…ˆçº§è®¡ç®—è¿‡æœŸæ—¶é—´")]),t._v("å’Œ"),a("strong",[t._v("é€šè¿‡"),a("code",[t._v("requestIdleCallback")]),t._v("æ–¹æ³•")]),t._v("ã€‚")]),t._v(" "),a("p",[t._v("å¯¹äºè®¡ç®—è¿‡æœŸæ—¶é—´ï¼Œåœ¨ä¸Šé¢å·²ç»æåŠï¼Œç°åœ¨å°±ä¸å†è®ºè¿°ã€‚")]),t._v(" "),a("p",[t._v("ç°åœ¨å°±æ¥çœ‹çœ‹"),a("code",[t._v("requestIdleCallback")]),t._v("æ–¹æ³•ï¼Œåˆ°åº•è¯¥æ–¹æ³•åšäº†å“ªäº›äº‹æƒ…ã€‚")]),t._v(" "),a("p",[t._v("è¯¥æ–¹æ³•å…¶å®å°±æ˜¯åœ¨æµè§ˆå™¨ç©ºé—²æ—¶æœŸä¾æ¬¡è°ƒç”¨äº‹ä»¶é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ï¼Œå†…éƒ¨å®ç°é‡‡ç”¨çš„æ˜¯å®ä»»åŠ¡"),a("code",[t._v("requestAnimationFrame")]),t._v("äº‹ä»¶ä»¥åŠ"),a("code",[t._v("setTimeout")]),t._v("å®šæ—¶å™¨æ¥å®ç°çš„ã€‚")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("rAFID "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("requestAnimationFrame")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("timestamp")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("localClearTimeout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("rAFTimeoutID"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("callback")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("timestamp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nrAFTimeoutID "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("localCancelAnimationFrame")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("rAFID"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("callback")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getCurrentTime")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("å¯ä»¥çœ‹åˆ°çš„æ˜¯ï¼Œå½“ä¸æ”¯æŒ"),a("code",[t._v("requestAnimationFrame")]),t._v("æ—¶ï¼Œå°±ä¼šä½¿ç”¨"),a("code",[t._v("setTimeout")]),t._v("è¿›è¡Œè¡¥æ•‘ï½")]),t._v(" "),a("p",[t._v("ç°åœ¨æˆ‘ä»¬å°±æ¥æ€»ç»“ä¸€ä¸‹ï¼Œè°ƒåº¦ä»»åŠ¡çš„è¿‡ç¨‹ï¼š")]),t._v(" "),a("ol",[a("li",[t._v("å½“æœ‰æ›´æ–°ä»»åŠ¡å‘ç”Ÿæ—¶ï¼Œè°ƒåº¦å™¨ä¼šå…ˆæ ¹æ®ç­–ç•¥åˆ†é…å…¶ä¸€ä¸ªä¼˜å…ˆçº§ï¼Œæ¯”å¦‚åŠ¨ç”»çš„ä¼˜å…ˆçº§ä¼šé«˜äºæ›´æ–°çŠ¶æ€ä¼˜å…ˆçº§ã€‚")]),t._v(" "),a("li",[t._v("æ¥ç€æ ¹æ®åˆ†é…å¥½çš„ä¼˜å…ˆçº§è®¡ç®—å‡ºè¿‡æœŸæ—¶é—´ï¼ˆå³å½“å‰æ—¶é—´ + ä¼˜å…ˆçº§ï¼‰ï¼Œä¼˜å…ˆçº§è¶Šé«˜é‚£ä¹ˆæ—¶é—´å°±è¶Šè¿‘ã€‚")]),t._v(" "),a("li",[t._v("è®¡ç®—å¥½è¿‡æœŸæ—¶é—´åå°±ä¼šå­˜å‚¨åˆ°ä¸€ä¸ªä»»åŠ¡é˜Ÿåˆ—ä¸­ã€‚")]),t._v(" "),a("li",[t._v("ç­‰å¾…åˆ°æµè§ˆå™¨ç©ºé—²æ—¶ï¼Œå³ä¸»çº¿ç¨‹çš„ä»£ç éƒ½æ‰§è¡Œå®Œåï¼Œæ¥ç€è°ƒç”¨"),a("code",[t._v("requestIdleCallback")]),t._v("æ–¹æ³•æ¥æ‰§è¡Œä»»åŠ¡é˜Ÿåˆ—ä¸­æ–¹æ³•ï¼Œå…ˆåˆ¤æ–­ä»»åŠ¡è¿‡æœŸæ—¶é—´æ˜¯å¦è¿‡æœŸï¼Œè‹¥è¿‡æœŸåˆ™ä¼šç«‹å³ä¼˜å…ˆæ‰§è¡Œè¯¥ä»»åŠ¡ï¼Œè‹¥æ— åˆ™ä¼šæŒ‰ç…§ä¼˜å…ˆçº§å¤§å°æ‰§è¡Œã€‚")])]),t._v(" "),a("p",[t._v("éœ€è¦ç‰¹åˆ«è¯´æ˜çš„æ˜¯ï¼Œåœ¨"),a("code",[t._v("ReactÂ 15")]),t._v("ç‰ˆæœ¬ä¹‹å‰ï¼Œå½“ç»„ä»¶æ›´æ–°æ—¶ï¼Œå°±éœ€è¦é€’å½’å‘ä¸‹éå†æ•´ä¸ªè™šæ‹Ÿ"),a("code",[t._v("DOM")]),t._v("åˆ¤æ–­éœ€è¦æ›´æ–°çš„åœ°æ–¹ï¼Œè¿™ç§å¤„ç†å­˜åœ¨çš„å¼Šç«¯åœ¨äºæ— æ³•ä¸­æ–­ï¼Œå¿…é¡»æ›´æ–°å®Œæ‰€æœ‰ç»„ä»¶æ‰ä¼šåœæ­¢ã€‚å› æ­¤åœ¨æ›´æ–°è€—æ—¶é•¿çš„è¿‡ç¨‹ä¸­å°†ä¼šé˜»å¡ä¸»çº¿ç¨‹ï¼Œä»è€Œå¯¼è‡´ç”¨æˆ·çš„äº¤äº’ã€åŠ¨ç”»ç­‰ä¸èƒ½åŠæ—¶å“åº”ã€‚")]),t._v(" "),a("p",[t._v("åœ¨"),a("code",[t._v("ReactÂ 16")]),t._v("ç‰ˆæœ¬åï¼Œé‡‡ç”¨æ–°çš„"),a("code",[t._v("Fiber")]),t._v("æ¶æ„ï¼ˆå³è™šæ‹Ÿ"),a("code",[t._v("DOM")]),t._v("å‡çº§ç‰ˆï¼‰ï¼Œå°†æ•´ä¸ªæ›´æ–°ä»»åŠ¡æ‹†åˆ†æˆä¸€ä¸ªä¸ªå°çš„ä»»åŠ¡ï¼Œå¹¶ä¸”æ§åˆ¶è¿™äº›ä»»åŠ¡çš„æ‰§è¡Œã€‚ç®€å•æ¥è¯´ï¼Œ"),a("strong",[a("code",[t._v("Fiber")]),t._v("æ¶æ„å®ç°çš„å°±æ˜¯ï¼Œä»»åŠ¡éƒ½æ˜¯æŒ‰ç…§ä¼˜å…ˆçº§é«˜ä½æ‰§è¡Œï¼Œä¼˜å…ˆçº§é«˜çš„ä»»åŠ¡å¯ä»¥ä¸­æ–­ä¼˜å…ˆçº§ä½ä»»åŠ¡")]),t._v("ã€‚å…¶"),a("strong",[t._v("æ ¸å¿ƒåŒ…æ‹¬"),a("code",[t._v("fiber")]),t._v("æ•°æ®ç»“æ„å’Œè°ƒåº¦å™¨")]),t._v("ã€‚")]),t._v(" "),a("p",[t._v("åœ¨"),a("code",[t._v("diff")]),t._v("æµç¨‹ä¸Šï¼Œå’Œ"),a("code",[t._v("Vue")]),t._v("å®ç°æ˜¯å·®ä¸å¤šçš„ï¼Œæœ‰å…´è¶£çš„ç«¥é‹ï¼Œå¯ä»¥çœ‹çœ‹æˆ‘è¿™ç¯‡æ–‡ç« "),a("a",{attrs:{href:"https://github.com/Andraw-lin/about-Vue/blob/master/docs/%E3%80%90%20Vue%20%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%20%E3%80%91%E5%A6%82%E4%BD%95%E5%9C%A8%E6%9B%B4%E6%96%B0%20Patch%20%E4%B8%AD%E8%BF%9B%E8%A1%8C%20Diff.md",target:"_blank",rel:"noopener noreferrer"}},[t._v(" ã€Vue æºç åˆ†æ ã€‘å¦‚ä½•åœ¨æ›´æ–° Patch ä¸­è¿›è¡Œ Diff"),a("OutboundLink")],1),t._v("ã€‚")])])}),[],!1,null,null,null);e.default=n.exports}}]);